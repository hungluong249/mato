(function(){var g,k,d,b,f=[].slice,l={}.hasOwnProperty,c=function(m,a){function i(){this.constructor=m}for(var o in a){l.call(a,o)&&(m[o]=a[o])}return i.prototype=a.prototype,m.prototype=new i,m.__super__=a.prototype,m},j=function(i,a){return function(){return i.apply(a,arguments)}},h=[].indexOf||function(i){for(var a=0,m=this.length;a<m;a++){if(a in this&&this[a]===i){return a}}return -1};k=window.Morris={},g=jQuery,k.EventEmitter=function(){function a(){}return a.prototype.on=function(m,i){return this.handlers==null&&(this.handlers={}),this.handlers[m]==null&&(this.handlers[m]=[]),this.handlers[m].push(i),this},a.prototype.fire=function(){var v,m,x,q,p,w,i;x=arguments[0],v=2<=arguments.length?f.call(arguments,1):[];if(this.handlers!=null&&this.handlers[x]!=null){w=this.handlers[x],i=[];for(q=0,p=w.length;q<p;q++){m=w[q],i.push(m.apply(null,v))}return i}},a}(),k.commas=function(p){var m,q,o,a;return p!=null?(o=p<0?"-":"",m=Math.abs(p),q=Math.floor(m).toFixed(0),o+=q.replace(/(?=(?:\d{3})+$)(?!^)/g,","),a=m.toString(),a.length>q.length&&(o+=a.slice(q.length)),o):"-"},k.pad2=function(a){return(a<10?"0":"")+a},k.Grid=function(e){function a(i){var m=this;typeof i.element=="string"?this.el=g(document.getElementById(i.element)):this.el=g(i.element);if(this.el==null||this.el.length===0){throw new Error("Graph container element not found")}this.el.css("position")==="static"&&this.el.css("position","relative"),this.options=g.extend({},this.gridDefaults,this.defaults||{},i),typeof this.options.units=="string"&&(this.options.postUnits=i.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(o){var n;return n=m.el.offset(),m.fire("hovermove",o.pageX-n.left,o.pageY-n.top)}),this.el.bind("mouseout",function(n){return m.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(p){var n,o;return o=p.originalEvent.touches[0]||p.originalEvent.changedTouches[0],n=m.el.offset(),m.fire("hover",o.pageX-n.left,o.pageY-n.top),o}),this.el.bind("click",function(o){var n;return n=m.el.offset(),m.fire("gridclick",o.pageX-n.left,o.pageY-n.top)}),this.postInit&&this.postInit()}return c(a,e),a.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"]},a.prototype.setData=function(D,x){var q,A,J,w,I,G,C,z,F,B,t,E,H,y;x==null&&(x=!0),this.options.data=D;if(D==null||D.length===0){this.data=[],this.raphael.clear(),this.hover!=null&&this.hover.hide();return}E=this.cumulative?0:null,H=this.cumulative?0:null,this.options.goals.length>0&&(I=Math.min.apply(null,this.options.goals),w=Math.max.apply(null,this.options.goals),H=H!=null?Math.min(H,I):I,E=E!=null?Math.max(E,w):w),this.data=function(){var p,i,m;m=[];for(J=p=0,i=D.length;p<i;J=++p){C=D[J],G={},G.label=C[this.options.xkey],this.options.parseTime?(G.x=k.parseDate(G.label),this.options.dateFormat?G.label=this.options.dateFormat(G.x):typeof G.label=="number"&&(G.label=(new Date(G.label)).toString())):(G.x=J,this.options.xLabelFormat&&(G.label=this.options.xLabelFormat(G))),F=0,G.y=function(){var u,o,v,s;v=this.options.ykeys,s=[];for(A=u=0,o=v.length;u<o;A=++u){t=v[A],y=C[t],typeof y=="string"&&(y=parseFloat(y)),y!=null&&typeof y!="number"&&(y=null),y!=null&&(this.cumulative?F+=y:E!=null?(E=Math.max(y,E),H=Math.min(y,H)):E=H=y),this.cumulative&&F!=null&&(E=Math.max(F,E),H=Math.min(F,H)),s.push(y)}return s}.call(this),m.push(G)}return m}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(m,i){return(m.x>i.x)-(i.x>m.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.parseTime&&this.options.events.length>0&&(this.events=function(){var p,r,m,o;m=this.options.events,o=[];for(p=0,r=m.length;p<r;p++){q=m[p],o.push(k.parseDate(q))}return o}.call(this),this.xmax=Math.max(this.xmax,Math.max.apply(null,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(null,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",H),this.ymax=this.yboundary("max",E),this.ymin===this.ymax&&(H&&(this.ymin-=1),this.ymax+=1);if(this.options.axes===!0||this.options.grid===!0){this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(z=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var o,i,p,m;m=[];for(B=o=i=this.ymin,p=this.ymax;i<=p?o<=p:o>=p;B=o+=z){m.push(B)}return m}.call(this))}this.dirty=!0;if(x){return this.redraw()}},a.prototype.yboundary=function(o,i){var p,m;return p=this.options["y"+o],typeof p=="string"?p.slice(0,4)==="auto"?p.length>5?(m=parseInt(p.slice(5),10),i==null?m:Math[o](i,m)):i!=null?i:0:parseInt(p,10):p},a.prototype.autoGridLines=function(y,C,q){var m,w,D,p,B,A,x,v,z;return B=C-y,z=Math.floor(Math.log(B)/Math.log(10)),x=Math.pow(10,z),w=Math.floor(y/x)*x,m=Math.ceil(C/x)*x,A=(m-w)/(q-1),x===1&&A>1&&Math.ceil(A)!==A&&(A=Math.ceil(A),m=w+A*(q-1)),w<0&&m>0&&(w=Math.floor(y/A)*A,m=Math.ceil(C/A)*A),A<1?(p=Math.floor(Math.log(A)/Math.log(10)),D=function(){var n,i;i=[];for(v=n=w;w<=m?n<=m:n>=m;v=n+=A){i.push(parseFloat(v.toFixed(1-p)))}return i}()):D=function(){var n,i;i=[];for(v=n=w;w<=m?n<=m:n>=m;v=n+=A){i.push(v)}return i}(),D},a.prototype._calc=function(){var u,o,v,q,m,p;m=this.el.width(),v=this.el.height();if(this.elementWidth!==m||this.elementHeight!==v||this.dirty){this.elementWidth=m,this.elementHeight=v,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,this.options.axes&&(p=function(){var w,x,t,s;t=this.grid,s=[];for(w=0,x=t.length;w<x;w++){o=t[w],s.push(this.measureText(this.yAxisFormat(o)).width)}return s}.call(this),this.left+=Math.max.apply(Math,p),u=function(){var r,i,s;s=[];for(q=r=0,i=this.data.length;0<=i?r<i:r>i;q=0<=i?++r:--r){s.push(this.measureText(this.data[q].text,-this.options.xLabelAngle).height)}return s}.call(this),this.bottom-=Math.max.apply(Math,u)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin);if(this.calc){return this.calc()}}},a.prototype.transY=function(i){return this.bottom-(i-this.ymin)*this.dy},a.prototype.transX=function(i){return this.data.length===1?(this.left+this.right)/2:this.left+(i-this.xmin)*this.dx},a.prototype.redraw=function(){this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents();if(this.draw){return this.draw()}},a.prototype.measureText=function(o,i){var p,m;return i==null&&(i=0),m=this.raphael.text(100,100,o).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(i),p=m.getBBox(),m.remove(),p},a.prototype.yAxisFormat=function(i){return this.yLabelFormat(i)},a.prototype.yLabelFormat=function(i){return typeof this.options.yLabelFormat=="function"?this.options.yLabelFormat(i):""+this.options.preUnits+k.commas(i)+this.options.postUnits},a.prototype.updateHover=function(o,i){var p,m;p=this.hitTest(o,i);if(p!=null){return(m=this.hover).update.apply(m,p)}},a.prototype.drawGrid=function(){var u,o,v,q,m,p;if(this.options.grid===!1&&this.options.axes===!1){return}m=this.grid,p=[];for(v=0,q=m.length;v<q;v++){u=m[v],o=this.transY(u),this.options.axes&&this.drawYAxisLabel(this.left-this.options.padding/2,o,this.yAxisFormat(u)),this.options.grid?p.push(this.drawGridLine("M"+this.left+","+o+"H"+(this.left+this.width))):p.push(void 0)}return p},a.prototype.drawGoals=function(){var v,p,x,u,m,q,w;q=this.options.goals,w=[];for(x=u=0,m=q.length;u<m;x=++u){p=q[x],v=this.options.goalLineColors[x%this.options.goalLineColors.length],w.push(this.drawGoal(p,v))}return w},a.prototype.drawEvents=function(){var v,p,x,u,m,q,w;q=this.events,w=[];for(x=u=0,m=q.length;u<m;x=++u){p=q[x],v=this.options.eventLineColors[x%this.options.eventLineColors.length],w.push(this.drawEvent(p,v))}return w},a.prototype.drawGoal=function(m,i){return this.raphael.path("M"+this.left+","+this.transY(m)+"H"+this.right).attr("stroke",i).attr("stroke-width",this.options.goalStrokeWidth)},a.prototype.drawEvent=function(m,i){return this.raphael.path("M"+this.transX(m)+","+this.bottom+"V"+this.top).attr("stroke",i).attr("stroke-width",this.options.eventStrokeWidth)},a.prototype.drawYAxisLabel=function(m,i,o){return this.raphael.text(m,i,o).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},a.prototype.drawGridLine=function(i){return this.raphael.path(i).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},a}(k.EventEmitter),k.parseDate=function(y){var C,q,m,w,D,p,B,A,x,v,z;return typeof y=="number"?y:(q=y.match(/^(\d+) Q(\d)$/),w=y.match(/^(\d+)-(\d+)$/),D=y.match(/^(\d+)-(\d+)-(\d+)$/),B=y.match(/^(\d+) W(\d+)$/),A=y.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),x=y.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),q?(new Date(parseInt(q[1],10),parseInt(q[2],10)*3-1,1)).getTime():w?(new Date(parseInt(w[1],10),parseInt(w[2],10)-1,1)).getTime():D?(new Date(parseInt(D[1],10),parseInt(D[2],10)-1,parseInt(D[3],10))).getTime():B?(v=new Date(parseInt(B[1],10),0,1),v.getDay()!==4&&v.setMonth(0,1+(4-v.getDay()+7)%7),v.getTime()+parseInt(B[2],10)*604800000):A?A[6]?(p=0,A[6]!=="Z"&&(p=parseInt(A[8],10)*60+parseInt(A[9],10),A[7]==="+"&&(p=0-p)),Date.UTC(parseInt(A[1],10),parseInt(A[2],10)-1,parseInt(A[3],10),parseInt(A[4],10),parseInt(A[5],10)+p)):(new Date(parseInt(A[1],10),parseInt(A[2],10)-1,parseInt(A[3],10),parseInt(A[4],10),parseInt(A[5],10))).getTime():x?(z=parseFloat(x[6]),C=Math.floor(z),m=Math.round((z-C)*1000),x[8]?(p=0,x[8]!=="Z"&&(p=parseInt(x[10],10)*60+parseInt(x[11],10),x[9]==="+"&&(p=0-p)),Date.UTC(parseInt(x[1],10),parseInt(x[2],10)-1,parseInt(x[3],10),parseInt(x[4],10),parseInt(x[5],10)+p,C,m)):(new Date(parseInt(x[1],10),parseInt(x[2],10)-1,parseInt(x[3],10),parseInt(x[4],10),parseInt(x[5],10),C,m)).getTime()):(new Date(parseInt(y,10),0,1)).getTime())},k.Hover=function(){function a(e){e==null&&(e={}),this.options=g.extend({},k.Hover.defaults,e),this.el=g("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return a.defaults={"class":"morris-hover morris-default-style"},a.prototype.update=function(m,i,o){return this.html(m),this.show(),this.moveTo(i,o)},a.prototype.html=function(i){return this.el.html(i)},a.prototype.moveTo=function(x,q){var z,w,p,v,y,m;return y=this.options.parent.innerWidth(),v=this.options.parent.innerHeight(),w=this.el.outerWidth(),z=this.el.outerHeight(),p=Math.min(Math.max(0,x-w/2),y-w),q!=null?(m=q-z-10,m<0&&(m=q+10,m+z>v&&(m=v/2-z/2))):m=v/2-z/2,this.el.css({left:p+"px",top:parseInt(m)+"px"})},a.prototype.show=function(){return this.el.show()},a.prototype.hide=function(){return this.el.hide()},a}(),k.Line=function(a){function i(m){this.hilight=j(this.hilight,this),this.onHoverOut=j(this.onHoverOut,this),this.onHoverMove=j(this.onHoverMove,this),this.onGridClick=j(this.onGridClick,this);if(!(this instanceof k.Line)){return new k.Line(m)}i.__super__.constructor.call(this,m)}return c(i,a),i.prototype.init=function(){this.pointGrow=Raphael.animation({r:this.options.pointSize+3},25,"linear"),this.pointShrink=Raphael.animation({r:this.options.pointSize},25,"linear");if(this.options.hideHover!=="always"){return this.hover=new k.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)}},i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,continuousLine:!0,hideHover:!1},i.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},i.prototype.calcPoints=function(){var u,o,v,q,m,p;m=this.data,p=[];for(v=0,q=m.length;v<q;v++){u=m[v],u._x=this.transX(u.x),u._y=function(){var x,w,e,t;e=u.y,t=[];for(x=0,w=e.length;x<w;x++){o=e[x],o!=null?t.push(this.transY(o)):t.push(o)}return t}.call(this),p.push(u._ymax=Math.min.apply(null,[this.bottom].concat(function(){var x,w,e,t;e=u._y,t=[];for(x=0,w=e.length;x<w;x++){o=e[x],o!=null&&t.push(o)}return t}())))}return p},i.prototype.hitTest=function(v,p){var x,u,m,q,w;if(this.data.length===0){return null}w=this.data.slice(1);for(x=m=0,q=w.length;m<q;x=++m){u=w[x];if(v<(u._x+this.data[x]._x)/2){break}}return x},i.prototype.onGridClick=function(o,m){var p;return p=this.hitTest(o,m),this.fire("click",p,this.options.data[p],o,m)},i.prototype.onHoverMove=function(o,m){var p;return p=this.hitTest(o,m),this.displayHoverForRow(p)},i.prototype.onHoverOut=function(){if(this.options.hideHover!==!1){return this.displayHoverForRow(null)}},i.prototype.displayHoverForRow=function(n){var m;return n!=null?((m=this.hover).update.apply(m,this.hoverContentForRow(n)),this.hilight(n)):(this.hover.hide(),this.hilight())},i.prototype.hoverContentForRow=function(x){var q,z,w,p,v,y,m;w=this.data[x],q="<div class='morris-hover-row-label'>"+w.label+"</div>",m=w.y;for(z=v=0,y=m.length;v<y;z=++v){p=m[z],q+="<div class='morris-hover-point' style='color: "+this.colorFor(w,z,"label")+"'>\n  "+this.options.labels[z]+":\n  "+this.yLabelFormat(p)+"\n</div>"}return typeof this.options.hoverCallback=="function"&&(q=this.options.hoverCallback(x,this.options,q)),[q,w._x,w._ymax]},i.prototype.generatePaths=function(){var q,t,p,m,o;return this.paths=function(){var s,n,r,e;e=[];for(p=s=0,n=this.options.ykeys.length;0<=n?s<n:s>n;p=0<=n?++s:--s){o=this.options.smooth===!0||(r=this.options.ykeys[p],h.call(this.options.smooth,r)>=0),t=function(){var w,u,x,v;x=this.data,v=[];for(w=0,u=x.length;w<u;w++){m=x[w],m._y[p]!==void 0&&v.push({x:m._x,y:m._y[p]})}return v}.call(this),this.options.continuousLine&&(t=function(){var v,w,u;u=[];for(v=0,w=t.length;v<w;v++){q=t[v],q.y!==null&&u.push(q)}return u}()),t.length>1?e.push(k.Line.createPath(t,o,this.bottom)):e.push(null)}return e}.call(this)},i.prototype.draw=function(){this.options.axes&&this.drawXAxis(),this.drawSeries();if(this.options.hideHover===!1){return this.displayHoverForRow(this.data.length-1)}},i.prototype.drawXAxis=function(){var x,q,m,v,B,p,A,z,w,t,y=this;A=this.bottom+this.options.padding/2,B=null,v=null,x=function(E,u){var G,C,F,s,D;return G=y.drawXAxisLabel(y.transX(u),A,E),D=G.getBBox(),G.transform("r"+-y.options.xLabelAngle),C=G.getBBox(),G.transform("t0,"+C.height/2+"..."),y.options.xLabelAngle!==0&&(s=-0.5*D.width*Math.cos(y.options.xLabelAngle*Math.PI/180),G.transform("t"+s+",0...")),C=G.getBBox(),(B==null||B>=C.x+C.width||v!=null&&v>=C.x)&&C.x>=0&&C.x+C.width<y.el.width()?(y.options.xLabelAngle!==0&&(F=1.25*y.options.gridTextSize/Math.sin(y.options.xLabelAngle*Math.PI/180),v=C.x-F),B=C.x-y.options.xLabelMargin):G.remove()},this.options.parseTime?this.data.length===1&&this.options.xLabels==="auto"?m=[[this.data[0].label,this.data[0].x]]:m=k.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):m=function(){var u,o,C,s;C=this.data,s=[];for(u=0,o=C.length;u<o;u++){p=C[u],s.push([p.label,p.x])}return s}.call(this),m.reverse(),t=[];for(z=0,w=m.length;z<w;z++){q=m[z],t.push(x(q[0],q[1]))}return t},i.prototype.drawSeries=function(){var u,o,v,q,m,p;this.seriesPoints=[];for(u=o=q=this.options.ykeys.length-1;q<=0?o<=0:o>=0;u=q<=0?++o:--o){this._drawLineFor(u)}p=[];for(u=v=m=this.options.ykeys.length-1;m<=0?v<=0:v>=0;u=m<=0?++v:--v){p.push(this._drawPointFor(u))}return p},i.prototype._drawPointFor=function(v){var p,x,u,m,q,w;this.seriesPoints[v]=[],q=this.data,w=[];for(u=0,m=q.length;u<m;u++){x=q[u],p=null,x._y[v]!=null&&(p=this.drawLinePoint(x._x,x._y[v],this.options.pointSize,this.colorFor(x,v,"point"),v)),w.push(this.seriesPoints[v].push(p))}return w},i.prototype._drawLineFor=function(n){var m;m=this.paths[n];if(m!==null){return this.drawLinePath(m,this.colorFor(null,n,"line"))}},i.createPath=function(E,x,q){var A,K,w,J,H,D,z,G,B,t,F,I,y,C;z="",x&&(w=k.Line.gradients(E)),G={y:null};for(J=y=0,C=E.length;y<C;J=++y){A=E[J];if(A.y!=null){if(G.y!=null){x?(K=w[J],D=w[J-1],H=(A.x-G.x)/4,B=G.x+H,F=Math.min(q,G.y+H*D),t=A.x-H,I=Math.min(q,A.y-H*K),z+="C"+B+","+F+","+t+","+I+","+A.x+","+A.y):z+="L"+A.x+","+A.y}else{if(!x||w[J]!=null){z+="M"+A.x+","+A.y}}}G=A}return z},i.gradients=function(w){var z,q,m,v,A,p,y,x;q=function(o,n){return(o.y-n.y)/(o.x-n.x)},x=[];for(m=p=0,y=w.length;p<y;m=++p){z=w[m],z.y!=null?(v=w[m+1]||{y:null},A=w[m-1]||{y:null},A.y!=null&&v.y!=null?x.push(q(A,v)):A.y!=null?x.push(q(A,z)):v.y!=null?x.push(q(z,v)):x.push(null)):x.push(null)}return x},i.prototype.hilight=function(u){var o,v,q,m,p;if(this.prevHilight!==null&&this.prevHilight!==u){for(o=v=0,m=this.seriesPoints.length-1;0<=m?v<=m:v>=m;o=0<=m?++v:--v){this.seriesPoints[o][this.prevHilight]&&this.seriesPoints[o][this.prevHilight].animate(this.pointShrink)}}if(u!==null&&this.prevHilight!==u){for(o=q=0,p=this.seriesPoints.length-1;0<=p?q<=p:q>=p;o=0<=p?++q:--q){this.seriesPoints[o][u]&&this.seriesPoints[o][u].animate(this.pointGrow)}}return this.prevHilight=u},i.prototype.colorFor=function(o,m,p){return typeof this.options.lineColors=="function"?this.options.lineColors.call(this,o,m,p):p==="point"?this.options.pointFillColors[m%this.options.pointFillColors.length]||this.options.lineColors[m%this.options.lineColors.length]:this.options.lineColors[m%this.options.lineColors.length]},i.prototype.drawXAxisLabel=function(o,m,p){return this.raphael.text(o,m,p).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawLinePath=function(n,m){return this.raphael.path(n).attr("stroke",m).attr("stroke-width",this.options.lineWidth)},i.prototype.drawLinePoint=function(q,o,s,p,m){return this.raphael.circle(q,o,s).attr("fill",p).attr("stroke-width",this.strokeWidthForSeries(m)).attr("stroke",this.strokeForSeries(m))},i.prototype.strokeWidthForSeries=function(m){return this.options.pointWidths[m%this.options.pointWidths.length]},i.prototype.strokeForSeries=function(m){return this.options.pointStrokeColors[m%this.options.pointStrokeColors.length]},i}(k.Grid),k.labelSeries=function(w,e,z,I,t){var H,F,C,y,E,A,q,D,G,x,B;C=200*(e-w)/z,F=new Date(w),q=k.LABEL_SPECS[I];if(q===void 0){B=k.AUTO_LABEL_ORDER;for(G=0,x=B.length;G<x;G++){y=B[G],A=k.LABEL_SPECS[y];if(C>=A.span){q=A;break}}}q===void 0&&(q=k.LABEL_SPECS.second),t&&(q=g.extend({},q,{fmt:t})),H=q.start(F),E=[];while((D=H.getTime())<=e){D>=w&&E.push([q.fmt(H),D]),q.incr(H)}return E},d=function(a){return{span:a*60*1000,start:function(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours())},fmt:function(i){return""+k.pad2(i.getHours())+":"+k.pad2(i.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+a)}}},b=function(a){return{span:a*1000,start:function(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes())},fmt:function(i){return""+k.pad2(i.getHours())+":"+k.pad2(i.getMinutes())+":"+k.pad2(i.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+a)}}},k.LABEL_SPECS={decade:{span:172800000000,start:function(a){return new Date(a.getFullYear()-a.getFullYear()%10,0,1)},fmt:function(a){return""+a.getFullYear()},incr:function(a){return a.setFullYear(a.getFullYear()+10)}},year:{span:17280000000,start:function(a){return new Date(a.getFullYear(),0,1)},fmt:function(a){return""+a.getFullYear()},incr:function(a){return a.setFullYear(a.getFullYear()+1)}},month:{span:2419200000,start:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},fmt:function(a){return""+a.getFullYear()+"-"+k.pad2(a.getMonth()+1)},incr:function(a){return a.setMonth(a.getMonth()+1)}},day:{span:86400000,start:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},fmt:function(a){return""+a.getFullYear()+"-"+k.pad2(a.getMonth()+1)+"-"+k.pad2(a.getDate())},incr:function(a){return a.setDate(a.getDate()+1)}},hour:d(60),"30min":d(30),"15min":d(15),"10min":d(10),"5min":d(5),minute:d(1),"30sec":b(30),"15sec":b(15),"10sec":b(10),"5sec":b(5),second:b(1)},k.AUTO_LABEL_ORDER=["decade","year","month","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],k.Area=function(m){function a(o){var i;if(!(this instanceof k.Area)){return new k.Area(o)}i=g.extend({},e,o),this.cumulative=!i.behaveLikeLine,i.fillOpacity==="auto"&&(i.fillOpacity=i.behaveLikeLine?0.8:1),a.__super__.constructor.call(this,i)}var e;return c(a,m),e={fillOpacity:"auto",behaveLikeLine:!1},a.prototype.calcPoints=function(){var w,q,y,v,p,u,x;u=this.data,x=[];for(v=0,p=u.length;v<p;v++){w=u[v],w._x=this.transX(w.x),q=0,w._y=function(){var z,n,t,A;t=w.y,A=[];for(z=0,n=t.length;z<n;z++){y=t[z],this.options.behaveLikeLine?A.push(this.transY(y)):(q+=y||0,A.push(this.transY(q)))}return A}.call(this),x.push(w._ymax=Math.max.apply(Math,w._y))}return x},a.prototype.drawSeries=function(){var z,C,v,p,x,D,q,B,A,y,w;this.seriesPoints=[],this.options.behaveLikeLine?C=function(){A=[];for(var n=0,i=this.options.ykeys.length-1;0<=i?n<=i:n>=i;0<=i?n++:n--){A.push(n)}return A}.apply(this):C=function(){y=[];for(var i=B=this.options.ykeys.length-1;B<=0?i<=0:i>=0;B<=0?i++:i--){y.push(i)}return y}.apply(this),w=[];for(x=0,D=C.length;x<D;x++){z=C[x],this._drawFillFor(z),this._drawLineFor(z),w.push(this._drawPointFor(z))}return w},a.prototype._drawFillFor=function(n){var i;i=this.paths[n];if(i!==null){return i+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(i,this.fillForSeries(n))}},a.prototype.fillForSeries=function(n){var i;return i=Raphael.rgb2hsl(this.colorFor(this.data[n],n,"line")),Raphael.hsl(i.h,this.options.behaveLikeLine?i.s*0.9:i.s*0.75,Math.min(0.98,this.options.behaveLikeLine?i.l*1.2:i.l*1.25))},a.prototype.drawFilledPath=function(n,i){return this.raphael.path(n).attr("fill",i).attr("fill-opacity",this.options.fillOpacity).attr("stroke-width",0)},a}(k.Line),k.Bar=function(e){function a(i){this.onHoverOut=j(this.onHoverOut,this),this.onHoverMove=j(this.onHoverMove,this),this.onGridClick=j(this.onGridClick,this);if(!(this instanceof k.Bar)){return new k.Bar(i)}a.__super__.constructor.call(this,g.extend({},i,{parseTime:!1}))}return c(a,e),a.prototype.init=function(){this.cumulative=this.options.stacked;if(this.options.hideHover!=="always"){return this.hover=new k.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)}},a.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],xLabelMargin:50},a.prototype.calc=function(){var i;this.calcBars();if(this.options.hideHover===!1){return(i=this.hover).update.apply(i,this.hoverContentForRow(this.data.length-1))}},a.prototype.calcBars=function(){var v,p,x,u,m,q,w;q=this.data,w=[];for(v=u=0,m=q.length;u<m;v=++u){p=q[v],p._x=this.left+this.width*(v+0.5)/this.data.length,w.push(p._y=function(){var y,t,n,o;n=p.y,o=[];for(y=0,t=n.length;y<t;y++){x=n[y],x!=null?o.push(this.transY(x)):o.push(null)}return o}.call(this))}return w},a.prototype.draw=function(){return this.options.axes&&this.drawXAxis(),this.drawSeries()},a.prototype.drawXAxis=function(){var z,D,q,m,w,E,p,C,B,y,v,A,x;y=this.bottom+this.options.padding/2,p=null,E=null,x=[];for(z=v=0,A=this.data.length;0<=A?v<A:v>A;z=0<=A?++v:--v){C=this.data[this.data.length-1-z],D=this.drawXAxisLabel(C._x,y,C.label),B=D.getBBox(),D.transform("r"+-this.options.xLabelAngle),q=D.getBBox(),D.transform("t0,"+q.height/2+"..."),this.options.xLabelAngle!==0&&(w=-0.5*B.width*Math.cos(this.options.xLabelAngle*Math.PI/180),D.transform("t"+w+",0...")),(p==null||p>=q.x+q.width||E!=null&&E>=q.x)&&q.x>=0&&q.x+q.width<this.el.width()?(this.options.xLabelAngle!==0&&(m=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),E=q.x-m),x.push(p=q.x-this.options.xLabelMargin)):x.push(D.remove())}return x},a.prototype.drawSeries=function(){var B,F,w,m,y,G,v,E,D,A,x,C,z,q;return w=this.width/this.options.data.length,E=this.options.stacked!=null?1:this.options.ykeys.length,B=(w*this.options.barSizeRatio-this.options.barGap*(E-1))/E,v=w*(1-this.options.barSizeRatio)/2,q=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var o,p,n,i;n=this.data,i=[];for(m=o=0,p=n.length;o<p;m=++o){D=n[m],y=0,i.push(function(){var t,H,s,r;s=D._y,r=[];for(A=t=0,H=s.length;t<H;A=++t){z=s[A],z!==null?(q?(C=Math.min(z,q),F=Math.max(z,q)):(C=z,F=this.bottom),G=this.left+m*w+v,this.options.stacked||(G+=A*(B+this.options.barGap)),x=F-C,this.options.stacked&&(C-=y),this.drawBar(G,C,B,x,this.colorFor(D,A,"bar")),r.push(y+=x)):r.push(null)}return r}.call(this))}return i}.call(this)},a.prototype.colorFor=function(q,o,s){var p,m;return typeof this.options.barColors=="function"?(p={x:q.x,y:q.y[o],label:q.label},m={index:o,key:this.options.ykeys[o],label:this.options.labels[o]},this.options.barColors.call(this,p,m,s)):this.options.barColors[o%this.options.barColors.length]},a.prototype.hitTest=function(m,i){return this.data.length===0?null:(m=Math.max(Math.min(m,this.right),this.left),Math.min(this.data.length-1,Math.floor((m-this.left)/(this.width/this.data.length))))},a.prototype.onGridClick=function(m,i){var o;return o=this.hitTest(m,i),this.fire("click",o,this.options.data[o],m,i)},a.prototype.onHoverMove=function(o,i){var p,m;return p=this.hitTest(o,i),(m=this.hover).update.apply(m,this.hoverContentForRow(p))},a.prototype.onHoverOut=function(){if(this.options.hideHover!==!1){return this.hover.hide()}},a.prototype.hoverContentForRow=function(w){var z,q,m,v,A,p,y,x;m=this.data[w],z="<div class='morris-hover-row-label'>"+m.label+"</div>",x=m.y;for(q=p=0,y=x.length;p<y;q=++p){A=x[q],z+="<div class='morris-hover-point' style='color: "+this.colorFor(m,q,"label")+"'>\n  "+this.options.labels[q]+":\n  "+this.yLabelFormat(A)+"\n</div>"}return typeof this.options.hoverCallback=="function"&&(z=this.options.hoverCallback(w,this.options,z)),v=this.left+(w+0.5)*this.width/this.data.length,[z,v]},a.prototype.drawXAxisLabel=function(o,i,p){var m;return m=this.raphael.text(o,i,p).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},a.prototype.drawBar=function(q,o,s,p,m){return this.raphael.rect(q,o,s,p).attr("fill",m).attr("stroke-width",0)},a}(k.Grid),k.Donut=function(e){function a(m){this.select=j(this.select,this),this.click=j(this.click,this);var i;if(!(this instanceof k.Donut)){return new k.Donut(m)}typeof m.element=="string"?this.el=g(document.getElementById(m.element)):this.el=g(m.element),this.options=g.extend({},this.defaults,m);if(this.el===null||this.el.length===0){throw new Error("Graph placeholder not found.")}if(m.data===void 0||m.data.length===0){return}this.data=m.data,this.values=function(){var q,p,r,o;r=this.data,o=[];for(q=0,p=r.length;q<p;q++){i=r[q],o.push(parseFloat(i.value))}return o}.call(this),this.redraw()}return c(a,e),a.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:k.commas},a.prototype.redraw=function(){var Q,J,G,M,F,I,C,V,P,L,T,N,H,R,B,K,O,t,U,A,D,q,z;this.el.empty(),this.raphael=new Raphael(this.el[0]),J=this.el.width()/2,G=this.el.height()/2,H=(Math.min(J,G)-10)/3,T=0,A=this.values;for(R=0,O=A.length;R<O;R++){N=A[R],T+=N}V=5/(2*H),Q=1.9999*Math.PI-V*this.data.length,I=0,F=0,this.segments=[],D=this.values;for(M=B=0,t=D.length;B<t;M=++B){N=D[M],P=I+V+Q*(N/T),L=new k.DonutSegment(J,G,H*2,H,I,P,this.options.colors[F%this.options.colors.length],this.options.backgroundColor,F,this.raphael),L.render(),this.segments.push(L),L.on("hover",this.select),L.on("click",this.click),I=P,F+=1}this.text1=this.drawEmptyDonutLabel(J,G-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(J,G+10,this.options.labelColor,14),C=Math.max.apply(null,function(){var o,i,p,m;p=this.values,m=[];for(o=0,i=p.length;o<i;o++){N=p[o],m.push(N)}return m}.call(this)),F=0,q=this.values,z=[];for(K=0,U=q.length;K<U;K++){N=q[K];if(N===C){this.select(F);break}z.push(F+=1)}return z},a.prototype.click=function(i){return this.fire("click",i,this.data[i])},a.prototype.select=function(v){var p,x,u,m,q,w;w=this.segments;for(m=0,q=w.length;m<q;m++){x=w[m],x.deselect()}return u=this.segments[v],u.select(),p=this.data[v],this.setLabels(p.label,this.options.formatter(p.value,p))},a.prototype.setLabels=function(x,A){var q,m,v,B,p,z,y,w;return q=(Math.min(this.el.width()/2,this.el.height()/2)-10)*2/3,B=1.8*q,v=q/2,m=q/3,this.text1.attr({text:x,transform:""}),p=this.text1.getBBox(),z=Math.min(B/p.width,v/p.height),this.text1.attr({transform:"S"+z+","+z+","+(p.x+p.width/2)+","+(p.y+p.height)}),this.text2.attr({text:A,transform:""}),y=this.text2.getBBox(),w=Math.min(B/y.width,m/y.height),this.text2.attr({transform:"S"+w+","+w+","+(y.x+y.width/2)+","+y.y})},a.prototype.drawEmptyDonutLabel=function(u,o,v,q,m){var p;return p=this.raphael.text(u,o,"").attr("font-size",q).attr("fill",v),m!=null&&p.attr("font-weight",m),p},a}(k.EventEmitter),k.DonutSegment=function(i){function a(x,z,q,m,v,A,p,y,w,u){this.cx=x,this.cy=z,this.inner=q,this.outer=m,this.color=p,this.backgroundColor=y,this.index=w,this.raphael=u,this.deselect=j(this.deselect,this),this.select=j(this.select,this),this.sin_p0=Math.sin(v),this.cos_p0=Math.cos(v),this.sin_p1=Math.sin(A),this.cos_p1=Math.cos(A),this.is_long=A-v>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return c(a,i),a.prototype.calcArcPoints=function(m){return[this.cx+m*this.sin_p0,this.cy+m*this.cos_p0,this.cx+m*this.sin_p1,this.cy+m*this.cos_p1]},a.prototype.calcSegment=function(y,C){var q,m,w,D,p,B,A,x,v,z;return v=this.calcArcPoints(y),q=v[0],w=v[1],m=v[2],D=v[3],z=this.calcArcPoints(C),p=z[0],A=z[1],B=z[2],x=z[3],"M"+q+","+w+("A"+y+","+y+",0,"+this.is_long+",0,"+m+","+D)+("L"+B+","+x)+("A"+C+","+C+",0,"+this.is_long+",1,"+p+","+A)+"Z"},a.prototype.calcArc=function(u){var o,v,q,m,p;return p=this.calcArcPoints(u),o=p[0],q=p[1],v=p[2],m=p[3],"M"+o+","+q+("A"+u+","+u+",0,"+this.is_long+",0,"+v+","+m)},a.prototype.render=function(){var m=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return m.fire("hover",m.index)},function(){return m.fire("click",m.index)})},a.prototype.drawDonutArc=function(n,m){return this.raphael.path(n).attr({stroke:m,"stroke-width":2,opacity:0})},a.prototype.drawDonutSegment=function(q,o,s,p,m){return this.raphael.path(q).attr({fill:o,stroke:s,"stroke-width":3}).hover(p).click(m)},a.prototype.select=function(){if(!this.selected){return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0}},a.prototype.deselect=function(){if(this.selected){return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1}},a}(k.EventEmitter)}).call(this);