/*!
 * jquery.customSelect() - v0.4.1
 * http://adam.co/lab/jquery/customselect/
 * 2013-05-13
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License
 */
(function(b){b.fn.extend({customSelect:function(j){if(typeof document.body.style.maxHeight==="undefined"){return this}var h={customClass:"customSelect",mapClass:true,mapStyle:true},j=b.extend(h,j),i=j.customClass,g=function(f,c){var l=f.find(":selected"),d=c.children(":first"),e=l.html()||"&nbsp;";d.html(e);if(l.attr("disabled")){c.addClass(a("DisabledOption"))}else{c.removeClass(a("DisabledOption"))}setTimeout(function(){c.removeClass(a("Open"));b(document).off("mouseup."+a("Open"))},60)},a=function(c){return i+c};return this.each(function(){var e=b(this),c=b("<span />").addClass(a("Inner")),d=b("<span />");e.after(d.append(c));d.addClass(i);if(j.mapClass){d.addClass(e.attr("class"))}if(j.mapStyle){d.attr("style",e.attr("style"))}e.addClass("hasCustomSelect").on("update",function(){g(e,d);var f=parseInt(e.outerWidth(),10)-(parseInt(d.outerWidth(),10)-parseInt(d.width(),10));d.css({display:"inline-block"});var l=d.outerHeight();if(e.attr("disabled")){d.addClass(a("Disabled"))}else{d.removeClass(a("Disabled"))}c.css({width:f,display:"inline-block"});e.css({"-webkit-appearance":"menulist-button",width:d.outerWidth(),position:"absolute",opacity:0,height:l,fontSize:d.css("font-size")})}).on("change",function(){d.addClass(a("Changed"));g(e,d)}).on("keyup",function(f){if(!d.hasClass(a("Open"))){e.blur();e.focus()}else{if(f.which==13||f.which==27){g(e,d)}}}).on("mousedown",function(f){d.removeClass(a("Changed"))}).on("mouseup",function(f){if(!d.hasClass(a("Open"))){if(b("."+a("Open")).not(d).length>0&&typeof InstallTrigger!=="undefined"){e.focus()}else{d.addClass(a("Open"));f.stopPropagation();b(document).one("mouseup."+a("Open"),function(l){if(l.target!=e.get(0)&&b.inArray(l.target,e.find("*").get())<0){e.blur()}else{g(e,d)}})}}}).focus(function(){d.removeClass(a("Changed")).addClass(a("Focus"))}).blur(function(){d.removeClass(a("Focus")+" "+a("Open"))}).hover(function(){d.addClass(a("Hover"))},function(){d.removeClass(a("Hover"))}).trigger("update")})}})})(jQuery);