module("Options",{setup:function(){},teardown:function(){$("#qunit-fixture *").each(function(){var a=$(this);if("datepicker" in a.data()){a.datepicker("remove")}})}});test("Autoclose",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",autoclose:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.is(":visible"),"Picker is visible");c=b.find(".datepicker-days tbody td:nth(7)");equal(c.text(),"4");c.click();ok(b.is(":not(:visible)"),"Picker is hidden");datesEqual(d.dates[0],UTCDate(2012,2,4));datesEqual(d.viewDate,UTCDate(2012,2,4))});test("Custom date formatter functions",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2015-09-18T00:00:00.000Z").datepicker({format:{toDisplay:function(e,f,h){var g=new Date(e);g.setDate(g.getDate()-7);return g.toISOString()},toValue:function(e,f,h){var g=new Date(e);g.setDate(g.getDate()+7);return new Date(g)}},autoclose:true}),d=a.data("datepicker"),b=d.picker,c;equal(a.val(),"2015-09-18T00:00:00.000Z");datesEqual(d.dates[0],UTCDate(2015,8,25));datesEqual(d.viewDate,UTCDate(2015,8,25));a.focus();ok(b.is(":visible"),"Picker is visible");c=b.find(".datepicker-days tbody td:nth(5)");equal(c.text(),"4");c.click();ok(b.is(":not(:visible)"),"Picker is hidden");equal(a.val(),"2015-08-28T00:00:00.000Z");datesEqual(d.dates[0],UTCDate(2015,8,4));datesEqual(d.viewDate,UTCDate(2015,8,4))});test("Startview: year view (integer)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:1}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":visible"),"Months view visible");ok(b.find(".datepicker-years").is(":not(:visible)"),"Years view hidden");ok(b.find(".datepicker-decades").is(":not(:visible)"),"Decades view hidden");ok(b.find(".datepicker-centuries").is(":not(:visible)"),"Centuries view hidden")});test("Startview: year view (string)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:"year"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":visible"),"Months view visible");ok(b.find(".datepicker-years").is(":not(:visible)"),"Years view hidden");ok(b.find(".datepicker-decades").is(":not(:visible)"),"Decades view hidden");ok(b.find(".datepicker-centuries").is(":not(:visible)"),"Centuries view hidden")});test("Startview: decade view (integer)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:2}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":visible"),"Years view visible");ok(b.find(".datepicker-decades").is(":not(:visible)"),"Decades view hidden");ok(b.find(".datepicker-centuries").is(":not(:visible)"),"Centuries view hidden")});test("Startview: decade view (string)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:"decade"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":visible"),"Years view visible");ok(b.find(".datepicker-decades").is(":not(:visible)"),"Decades view hidden");ok(b.find(".datepicker-centuries").is(":not(:visible)"),"Centuries view hidden")});test("Startview: century view (integer)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:3}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":not(:visible)"),"Years view hidden");ok(b.find(".datepicker-decades").is(":visible"),"Decades view visible");ok(b.find(".datepicker-centuries").is(":not(:visible)"),"Centuries view hidden")});test("Startview: century view (string)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:"century"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":not(:visible)"),"Years view hidden");ok(b.find(".datepicker-decades").is(":visible"),"Decades view visible");ok(b.find(".datepicker-centuries").is(":not(:visible)"),"Centuries view hidden")});test("Startview: millennium view (integer)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:4}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":not(:visible)"),"Years view hidden");ok(b.find(".datepicker-decades").is(":not(:visible)"),"Decades view hidden");ok(b.find(".datepicker-centuries").is(":visible"),"Centuries view visible")});test("Startview: millennium view (string)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:"millennium"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":not(:visible)"),"Years view hidden");ok(b.find(".datepicker-decades").is(":not(:visible)"),"Decades view hidden");ok(b.find(".datepicker-centuries").is(":visible"),"Centuries view visible")});test("Today Button: today button not default",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":visible"),"Days view visible");ok(b.find(".datepicker-days tfoot .today").is(":not(:visible)"),"Today button not visible")});test("Today Button: today visibility when enabled",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",todayBtn:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":visible"),"Days view visible");ok(b.find(".datepicker-days tfoot .today").is(":visible"),"Today button visible");b.find(".datepicker-days thead th.datepicker-switch").click();ok(b.find(".datepicker-months").is(":visible"),"Months view visible");ok(b.find(".datepicker-months tfoot .today").is(":visible"),"Today button visible");b.find(".datepicker-months thead th.datepicker-switch").click();ok(b.find(".datepicker-years").is(":visible"),"Years view visible");ok(b.find(".datepicker-years tfoot .today").is(":visible"),"Today button visible")});test("Today Button: data-api",function(){var a=$('<input data-date-today-btn="true" />').appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":visible"),"Days view visible");ok(b.find(".datepicker-days tfoot .today").is(":visible"),"Today button visible")});test("Today Button: moves to today's date",function(){var b=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",todayBtn:true}),g=b.data("datepicker"),c=g.picker,e;b.focus();ok(c.find(".datepicker-days").is(":visible"),"Days view visible");ok(c.find(".datepicker-days tfoot .today").is(":visible"),"Today button visible");e=c.find(".datepicker-days tfoot .today");e.click();var f=new Date(),a=UTCDate(f.getFullYear(),f.getMonth(),f.getDate());datesEqual(g.viewDate,a);datesEqual(g.dates[0],UTCDate(2012,2,5))});test("Today Button: moves to days view",function(){var c=$.fn.datepicker.DPGlobal.viewModes;var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",startView:c.length-1,todayBtn:true}),e=a.data("datepicker"),b=e.picker,d;a.focus();d=b.find("tfoot .today").filter(":visible");d.click();ok(b.find(".datepicker-days tfoot .today").is(":visible"),"Today button visible")});test('Today Button: "linked" selects today\'s date',function(){var b=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",todayBtn:"linked"}),g=b.data("datepicker"),c=g.picker,e;b.focus();ok(c.find(".datepicker-days").is(":visible"),"Days view visible");ok(c.find(".datepicker-days tfoot .today").is(":visible"),"Today button visible");e=c.find(".datepicker-days tfoot .today");e.click();var f=new Date(),a=UTCDate(f.getFullYear(),f.getMonth(),f.getDate());datesEqual(g.viewDate,a);datesEqual(g.dates[0],a)});test("Today Highlight: today's date is not highlighted by default",patch_date(function(a){a.now=UTCDate(2012,2,15);var b=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd"}),e=b.data("datepicker"),c=e.picker,d;b.focus();ok(c.find(".datepicker-days").is(":visible"),"Days view visible");equal(c.find(".datepicker-days thead .datepicker-switch").text(),"March 2012",'Title is "March 2012"');d=c.find(".datepicker-days tbody td:contains(15)");ok(!d.hasClass("today"),'Today is not marked with "today" class');d=c.find(".datepicker-days tbody td:contains(14)");ok(!d.hasClass("today"),'Yesterday is not marked with "today" class');d=c.find(".datepicker-days tbody td:contains(16)");ok(!d.hasClass("today"),'Tomorrow is not marked with "today" class')}));test("Today Highlight: today's date is highlighted when not active",patch_date(function(a){a.now=new a(2012,2,15);var b=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",todayHighlight:true}),e=b.data("datepicker"),c=e.picker,d;b.focus();ok(c.find(".datepicker-days").is(":visible"),"Days view visible");equal(c.find(".datepicker-days thead .datepicker-switch").text(),"March 2012",'Title is "March 2012"');d=c.find(".datepicker-days tbody td:contains(15)");ok(d.hasClass("today"),'Today is marked with "today" class');d=c.find(".datepicker-days tbody td:contains(14)");ok(!d.hasClass("today"),'Yesterday is not marked with "today" class');d=c.find(".datepicker-days tbody td:contains(16)");ok(!d.hasClass("today"),'Tomorrow is not marked with "today" class')}));test("Clear Button: clear visibility when enabled",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",clearBtn:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":visible"),"Days view visible");ok(b.find(".datepicker-days tfoot .clear").is(":visible"),"Clear button visible");b.find(".datepicker-days thead th.datepicker-switch").click();ok(b.find(".datepicker-months").is(":visible"),"Months view visible");ok(b.find(".datepicker-months tfoot .clear").is(":visible"),"Clear button visible");b.find(".datepicker-months thead th.datepicker-switch").click();ok(b.find(".datepicker-years").is(":visible"),"Years view visible");ok(b.find(".datepicker-years tfoot .clear").is(":visible"),"Clear button visible")});test("Clear Button: clears input value",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",clearBtn:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":visible"),"Days view visible");ok(b.find(".datepicker-days tfoot .clear").is(":visible"),"Today button visible");c=b.find(".datepicker-days tfoot .clear");c.click();equal(a.val(),"","Input value has been cleared.");ok(b.is(":visible"),"Picker is visible")});test("Clear Button: hides datepicker if autoclose is on",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",clearBtn:true,autoclose:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":visible"),"Days view visible");ok(b.find(".datepicker-days tfoot .clear").is(":visible"),"Today button visible");c=b.find(".datepicker-days tfoot .clear");c.click();equal(a.val(),"","Input value has been cleared.");ok(b.is(":not(:visible)"),"Picker is hidden")});test("Active Toggle Default: when active date is selected it is not unset",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 selected");c=b.find(".datepicker-days .day.active");c.click();equal(a.val(),"2012-03-05","Input value has not been cleared.")});test("Active Toggle Enabled (single date): when active date is selected it is unset",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",toggleActive:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 selected");c=b.find(".datepicker-days .day.active");c.click();equal(a.val(),"","Input value has been cleared.")});test("Active Toggle Multidate Default: when one of the active dates is selected it is unset",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",multidate:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 in dates");c=b.find(".datepicker-days tbody td:nth(7)");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,4),"2012-03-04 in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05,2012-03-04");c=b.find(".datepicker-days tbody td:nth(7)");c.click();ok(d.dates.contains(UTCDate(2012,2,4))===-1,"2012-03-04 no longer in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05")});test("Active Toggle Disabled: when active date is selected it remains",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",toggleActive:false}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 selected");c=b.find(".datepicker-days .day.active");c.click();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 still selected");datesEqual(d.viewDate,UTCDate(2012,2,5));equal(a.val(),"2012-03-05")});test("Active Toggle Multidate Disabled: when activeToggle is set to false, but multidate is set, the option is ignored and selecting an active date it is unset",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",multidate:true,toggleActive:false}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 in dates");c=b.find(".datepicker-days tbody td:nth(7)");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,4),"2012-03-04 in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05,2012-03-04");c=b.find(".datepicker-days tbody td:nth(7)");c.click();ok(d.dates.contains(UTCDate(2012,2,4))===-1,"2012-03-04 no longer in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05")});test("DaysOfWeekDisabled",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",daysOfWeekDisabled:"1,5"}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(22)");ok(c.hasClass("disabled"),"Day of week is disabled");c=b.find(".datepicker-days tbody td:nth(24)");ok(!c.hasClass("disabled"),"Day of week is enabled");c=b.find(".datepicker-days tbody td:nth(26)");ok(c.hasClass("disabled"),"Day of week is disabled")});test("DaysOfWeekHighlighted",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",startDate:"2012-10-02",daysOfWeekHighlighted:"1,5"}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(0)");ok(!c.hasClass("highlighted"),"Day of week is not highlighted");c=b.find(".datepicker-days tbody td:nth(22)");ok(c.hasClass("highlighted"),"Day of week is highlighted");c=b.find(".datepicker-days tbody td:nth(24)");ok(!c.hasClass("highlighted"),"Day of week is not highlighted");c=b.find(".datepicker-days tbody td:nth(26)");ok(c.hasClass("highlighted"),"Day of week is highlighted")});test("DatesDisabled",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",datesDisabled:["2012-10-1","2012-10-10","2012-10-20"]}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(1)");ok(c.hasClass("disabled"),"Day of week is disabled");ok(c.hasClass("disabled-date"),"Date is disabled");c=b.find(".datepicker-days tbody td:nth(2)");ok(!c.hasClass("disabled"),"Day of week is enabled");c=b.find(".datepicker-days tbody td:nth(10)");ok(c.hasClass("disabled"),"Day of week is disabled");ok(c.hasClass("disabled-date"),"Date is disabled");c=b.find(".datepicker-days tbody td:nth(11)");ok(!c.hasClass("disabled"),"Day of week is enabled");c=b.find(".datepicker-days tbody td:nth(20)");ok(c.hasClass("disabled"),"Day of week is disabled");ok(c.hasClass("disabled-date"),"Date is disabled");c=b.find(".datepicker-days tbody td:nth(21)");ok(!c.hasClass("disabled"),"Day of week is enabled")});test("DatesDisabled as attribute",function(){var a=$('<input data-date-dates-disabled="2012-10-1,2012-10-10,2012-10-20" />').appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd"}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(1)");ok(c.hasClass("disabled"),"Day of week is disabled");ok(c.hasClass("disabled-date"),"Date is disabled");c=b.find(".datepicker-days tbody td:nth(2)");ok(!c.hasClass("disabled"),"Day of week is enabled");c=b.find(".datepicker-days tbody td:nth(10)");ok(c.hasClass("disabled"),"Day of week is disabled");ok(c.hasClass("disabled-date"),"Date is disabled");c=b.find(".datepicker-days tbody td:nth(11)");ok(!c.hasClass("disabled"),"Day of week is enabled");c=b.find(".datepicker-days tbody td:nth(20)");ok(c.hasClass("disabled"),"Day of week is disabled");ok(c.hasClass("disabled-date"),"Date is disabled");c=b.find(".datepicker-days tbody td:nth(21)");ok(!c.hasClass("disabled"),"Day of week is enabled")});test("BeforeShowDay",function(){var b=function(f){switch(f.getDate()){case 25:return{tooltip:"Example tooltip",classes:"active"};case 26:return"test26";case 27:return{enabled:false,classes:"test27"};case 28:return false;case 30:return{content:"foo"+f.getDate()}}};var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",beforeShowDay:b}),e=a.data("datepicker"),c=e.picker,d;a.focus();d=c.find(".datepicker-days tbody td:nth(25)");equal(d.attr("title"),"Example tooltip","25th has tooltip");ok(!d.hasClass("disabled"),"25th is enabled");d=c.find(".datepicker-days tbody td:nth(26)");ok(d.hasClass("test26"),"26th has test26 class");ok(!d.hasClass("disabled"),"26th is enabled");d=c.find(".datepicker-days tbody td:nth(27)");ok(d.hasClass("test27"),"27th has test27 class");ok(d.hasClass("disabled"),"27th is disabled");d=c.find(".datepicker-days tbody td:nth(28)");ok(d.hasClass("disabled"),"28th is disabled");d=c.find(".datepicker-days tbody td:nth(29)");ok(!d.hasClass("disabled"),"29th is enabled");d=c.find(".datepicker-days tbody td:nth(30)");ok(d.text()=="foo30","30th has custom content")});test("BeforeShowMonth regress .day content",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",beforeShowDay:function(e){return{content:"<strong>foo123</strong>"}}}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(30)");c.trigger("click");datesEqual(d.viewDate,UTCDate(2012,9,30))});test("BeforeShowMonth",function(){var a=function(f){switch(f.getMonth()){case 0:return{tooltip:"Example tooltip",classes:"active"};case 2:return"testMarch";case 4:return{enabled:false,classes:"testMay"};case 5:return false}};var b=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",beforeShowMonth:a}),e=b.data("datepicker"),c=e.picker,d;b.focus();d=c.find(".datepicker-months tbody span:nth(0)");equal(d.attr("title"),"Example tooltip","1st has tooltip");ok(!d.hasClass("disabled"),"January is enabled");d=c.find(".datepicker-months tbody span:nth(2)");ok(d.hasClass("testMarch"),"March has testMarch class");ok(!d.hasClass("disabled"),"March enabled");d=c.find(".datepicker-months tbody span:nth(4)");ok(d.hasClass("testMay"),"May has testMay class");ok(d.hasClass("disabled"),"May is disabled");d=c.find(".datepicker-months tbody span:nth(5)");ok(d.hasClass("disabled"),"June is disabled");d=c.find(".datepicker-months tbody span:nth(6)");ok(!d.hasClass("disabled"),"July is enabled")});test("BeforeShowYear",function(){var c=function(f){switch(f.getFullYear()){case 2013:return{tooltip:"Example tooltip",classes:"active"};case 2014:return"test2014";case 2015:return{enabled:false,classes:"test2015"};case 2016:return false}};var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",beforeShowYear:c}),e=a.data("datepicker"),b=e.picker,d;a.focus();d=b.find(".datepicker-years tbody span:nth(4)");equal(d.attr("title"),"Example tooltip","5th has tooltip");ok(!d.hasClass("disabled"),"2013, 5th is enabled");d=b.find(".datepicker-years tbody span:nth(5)");ok(d.hasClass("test2014"),"6th has test2014 class");ok(!d.hasClass("disabled"),"2014, 6th is enabled");d=b.find(".datepicker-years tbody span:nth(6)");ok(d.hasClass("test2015"),"2015, 7th has test2015 class");ok(d.hasClass("disabled"),"2015, 7th is disabled");d=b.find(".datepicker-years tbody span:nth(7)");ok(d.hasClass("disabled"),"2016, 8th is disabled");d=b.find(".datepicker-years tbody span:nth(8)");ok(!d.hasClass("disabled"),"2017, 9th is enabled")});test("beforeShowDecade",function(){var c=function(f){switch(f.getFullYear()){case 2030:return{tooltip:"Example tooltip",classes:"active"};case 2040:return"test2040";case 2050:return{enabled:false,classes:"test2050"};case 2060:return false}};var a=$("<input />").appendTo("#qunit-fixture").val("03/05/2012").datepicker({beforeShowDecade:c}),e=a.data("datepicker"),b=e.picker,d;a.focus();d=b.find(".datepicker-decades tbody span:nth(4)");equal(d.attr("title"),"Example tooltip","5th has tooltip");ok(!d.hasClass("disabled"),"2030, 5th is enabled");d=b.find(".datepicker-decades tbody span:nth(5)");ok(d.hasClass("test2040"),"6th has test2040 class");ok(!d.hasClass("disabled"),"2040, 6th is enabled");d=b.find(".datepicker-decades tbody span:nth(6)");ok(d.hasClass("test2050"),"2050, 7th has test2050 class");ok(d.hasClass("disabled"),"2050, 7th is disabled");d=b.find(".datepicker-decades tbody span:nth(7)");ok(d.hasClass("disabled"),"2060, 8th is disabled");d=b.find(".datepicker-decades tbody span:nth(8)");ok(!d.hasClass("disabled"),"2070, 9th is enabled")});test("beforeShowCentury",function(){var d=function(f){switch(f.getFullYear()){case 2300:return{tooltip:"Example tooltip",classes:"active"};case 2400:return"test2400";case 2500:return{enabled:false,classes:"test2500"};case 2600:return false}};var a=$("<input />").appendTo("#qunit-fixture").val("03/05/2012").datepicker({beforeShowCentury:d}),e=a.data("datepicker"),b=e.picker,c;a.focus();c=b.find(".datepicker-centuries tbody span:nth(4)");equal(c.attr("title"),"Example tooltip","5th has tooltip");ok(!c.hasClass("disabled"),"2300, 5th is enabled");c=b.find(".datepicker-centuries tbody span:nth(5)");ok(c.hasClass("test2400"),"6th has test2400 class");ok(!c.hasClass("disabled"),"2400, 6th is enabled");c=b.find(".datepicker-centuries tbody span:nth(6)");ok(c.hasClass("test2500"),"2500, 7th has test2500 class");ok(c.hasClass("disabled"),"2500, 7th is disabled");c=b.find(".datepicker-centuries tbody span:nth(7)");ok(c.hasClass("disabled"),"2600, 8th is disabled");c=b.find(".datepicker-centuries tbody span:nth(8)");ok(!c.hasClass("disabled"),"2700, 9th is enabled")});test("Orientation: values are parsed correctly",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd"}),b=a.data("datepicker");equal(b.o.orientation.x,"auto");equal(b.o.orientation.y,"auto");b._process_options({orientation:""});equal(b.o.orientation.x,"auto","Empty value");equal(b.o.orientation.y,"auto","Empty value");b._process_options({orientation:"left"});equal(b.o.orientation.x,"left",'"left"');equal(b.o.orientation.y,"auto",'"left"');b._process_options({orientation:"right"});equal(b.o.orientation.x,"right",'"right"');equal(b.o.orientation.y,"auto",'"right"');b._process_options({orientation:"top"});equal(b.o.orientation.x,"auto",'"top"');equal(b.o.orientation.y,"top",'"top"');b._process_options({orientation:"bottom"});equal(b.o.orientation.x,"auto",'"bottom"');equal(b.o.orientation.y,"bottom",'"bottom"');b._process_options({orientation:"left top"});equal(b.o.orientation.x,"left",'"left top"');equal(b.o.orientation.y,"top",'"left top"');b._process_options({orientation:"left bottom"});equal(b.o.orientation.x,"left",'"left bottom"');equal(b.o.orientation.y,"bottom",'"left bottom"');b._process_options({orientation:"right top"});equal(b.o.orientation.x,"right",'"right top"');equal(b.o.orientation.y,"top",'"right top"');b._process_options({orientation:"right bottom"});equal(b.o.orientation.x,"right",'"right bottom"');equal(b.o.orientation.y,"bottom",'"right bottom"');b._process_options({orientation:"left right"});equal(b.o.orientation.x,"left",'"left right"');equal(b.o.orientation.y,"auto",'"left right"');b._process_options({orientation:"right left"});equal(b.o.orientation.x,"right",'"right left"');equal(b.o.orientation.y,"auto",'"right left"');b._process_options({orientation:"top bottom"});equal(b.o.orientation.x,"auto",'"top bottom"');equal(b.o.orientation.y,"top",'"top bottom"');b._process_options({orientation:"bottom top"});equal(b.o.orientation.x,"auto",'"bottom top"');equal(b.o.orientation.y,"bottom",'"bottom top"');b._process_options({orientation:"foo bar"});equal(b.o.orientation.x,"auto",'"foo bar"');equal(b.o.orientation.y,"auto",'"foo bar"');b._process_options({orientation:"foo left"});equal(b.o.orientation.x,"left",'"foo left"');equal(b.o.orientation.y,"auto",'"foo left"');b._process_options({orientation:"top bar"});equal(b.o.orientation.x,"auto",'"top bar"');equal(b.o.orientation.y,"top",'"top bar"')});test("startDate",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",startDate:new Date(2012,9,26)}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(25)");ok(c.hasClass("disabled"),"Previous day is disabled");c=b.find(".datepicker-days tbody td:nth(26)");ok(!c.hasClass("disabled"),"Specified date is enabled");c=b.find(".datepicker-days tbody td:nth(27)");ok(!c.hasClass("disabled"),"Next day is enabled")});test("endDate",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",endDate:new Date(2012,9,26)}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(25)");ok(!c.hasClass("disabled"),"Previous day is enabled");c=b.find(".datepicker-days tbody td:nth(26)");ok(!c.hasClass("disabled"),"Specified date is enabled");c=b.find(".datepicker-days tbody td:nth(27)");ok(c.hasClass("disabled"),"Next day is disabled")});test("Multidate",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",multidate:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 (initial date) in dates");c=b.find(".datepicker-days tbody td:nth(7)");equal(c.text(),"4");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,4),"2012-03-04 in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05,2012-03-04");c=b.find(".datepicker-days tbody td:nth(15)");equal(c.text(),"12");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,12),"2012-03-12 in dates");datesEqual(d.viewDate,UTCDate(2012,2,12));equal(a.val(),"2012-03-05,2012-03-04,2012-03-12");c=b.find(".datepicker-days tbody td:nth(7)");equal(c.text(),"4");c.click();ok(d.dates.contains(UTCDate(2012,2,4))===-1,"2012-03-04 no longer in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05,2012-03-12")});test("Multidate with limit",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",multidate:2}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(d.dates.contains(UTCDate(2012,2,5))!==-1,"2012-03-05 (initial date) in dates");c=b.find(".datepicker-days tbody td:nth(7)");equal(c.text(),"4");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,4),"2012-03-04 in dates");datesEqual(d.viewDate,UTCDate(2012,2,4));equal(a.val(),"2012-03-05,2012-03-04");c=b.find(".datepicker-days tbody td:nth(15)");equal(c.text(),"12");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,12),"2012-03-12 in dates");datesEqual(d.viewDate,UTCDate(2012,2,12));equal(a.val(),"2012-03-04,2012-03-12");c=b.find(".datepicker-days tbody td:nth(20)");equal(c.text(),"17");c.click();datesEqual(d.dates.get(-1),UTCDate(2012,2,17),"2012-03-17 in dates");ok(d.dates.contains(UTCDate(2012,2,4))===-1,"2012-03-04 no longer in dates");datesEqual(d.viewDate,UTCDate(2012,2,17));equal(a.val(),"2012-03-12,2012-03-17")});test("Multidate Separator",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",multidate:true,multidateSeparator:" "}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-days tbody td:nth(7)");equal(c.text(),"4");c.click();equal(a.val(),"2012-03-05 2012-03-04");c=b.find(".datepicker-days tbody td:nth(15)");equal(c.text(),"12");c.click();equal(a.val(),"2012-03-05 2012-03-04 2012-03-12")});test("Picker is shown on input focus when showOnFocus is not defined",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2014-01-01").datepicker({}),c=a.data("datepicker"),b=c.picker;a.focus();ok(b.is(":visible"),"Datepicker is visible")});test("Picker is shown on input focus when showOnFocus is true",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2014-01-01").datepicker({showOnFocus:true}),c=a.data("datepicker"),b=c.picker;a.focus();ok(b.is(":visible"),"Datepicker is visible")});test("Picker is hidden on input focus when showOnFocus is false",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2014-01-01").datepicker({showOnFocus:false}),c=a.data("datepicker"),b=c.picker;a.focus();ok(b.is(":hidden"),"Datepicker is hidden")});test("Container",function(){var b=$('<div class="date-picker-container"/>').appendTo("#qunit-fixture"),a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",container:".date-picker-container",startDate:new Date(2012,9,26)}),d=a.data("datepicker"),c=d.picker;a.focus();equal(c.parent()[0],b[0],"Container is not the testContainer that was specificed")});test("Default View Date (Object)",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({format:"yyyy-mm-dd",defaultViewDate:{year:1977,month:4,day:25}}),d=a.data("datepicker"),b=d.picker,c;a.focus();equal(b.find(".datepicker-days thead .datepicker-switch").text(),"May 1977")});test("Default View Date (Date)",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({format:"yyyy-mm-dd",defaultViewDate:new Date(1977,4,25)}),d=a.data("datepicker"),b=d.picker,c;a.focus();equal(b.find(".datepicker-days thead .datepicker-switch").text(),"May 1977")});test("Default View Date (String)",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({format:"yyyy-mm-dd",defaultViewDate:"1977-05-24"}),d=a.data("datepicker"),b=d.picker,c;a.focus();equal(b.find(".datepicker-days thead .datepicker-switch").text(),"May 1977")});test("Immediate Updates",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2014-01-01").datepicker({format:"yyyy-mm-dd",immediateUpdates:true}),c=a.data("datepicker"),b=c.picker;a.focus();b.find(".datepicker-days .next").click();equal(a.val(),"2014-02-01");b.find(".datepicker-days .datepicker-switch").click();b.find(".datepicker-months .next").click();equal(a.val(),"2015-02-01");b.find(".datepicker-months .datepicker-switch").click();b.find(".datepicker-years .next").click();equal(a.val(),"2015-02-01");b.find(".datepicker-years .datepicker-switch").click();b.find(".datepicker-decades .next").click();equal(a.val(),"2015-02-01");b.find(".datepicker-decades .datepicker-switch").click();b.find(".datepicker-centuries .next").click();equal(a.val(),"2015-02-01")});test("forceParse: false on enter on invalid date",function(){var a=$("<input />").appendTo("#qunit-fixture").val("123456789").datepicker({forceParse:false}).focus();a.trigger({type:"keydown",keyCode:13,shiftKey:false});equal(a.val(),"123456789","date not parsed")});test("forceParse: false on mousedown on invalid date",function(){var a=$("<input />").appendTo("#qunit-fixture").val("123456789").datepicker({forceParse:false}).focus();$(document).trigger({type:"mousedown"});equal(a.val(),"123456789","date not parsed")});test("Enable on readonly options (default)",function(){var a=$('<input readonly="readonly" />').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy"}),c=a.data("datepicker"),b=c.picker;ok(!b.is(":visible"));a.focus();ok(b.is(":visible"))});test("Enable on readonly options (false)",function(){var a=$('<input readonly="readonly" />').appendTo("#qunit-fixture").datepicker({format:"dd-mm-yyyy",enableOnReadonly:false}),c=a.data("datepicker"),b=c.picker;ok(!b.is(":visible"));a.focus();ok(!b.is(":visible"))});test("Startview: year view visible after date pick",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({startView:2,minViewMode:1,autoclose:true}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":visible"),"Years view visible");c=b.find(".datepicker-years tbody td:nth(7)");c.click();c=b.find(".datepicker-years tbody td:nth(4)");c.click();c=b.find(".datepicker-years tbody td:nth(20)");c.click();a.focus();ok(b.find(".datepicker-days").is(":not(:visible)"),"Days view hidden");ok(b.find(".datepicker-months").is(":not(:visible)"),"Months view hidden");ok(b.find(".datepicker-years").is(":visible"),"Years view visible")});test("Title: none",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({format:"yyyy-mm-dd"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.is(":visible"),"Picker is visible");c=b.find(".datepicker-days thead .datepicker-title");ok(c.is(":not(:visible)"),"Title is hidden")});test("Title: with value",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({format:"yyyy-mm-dd",title:"Some Title"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.is(":visible"),"Picker is visible");c=b.find(".datepicker-days thead .datepicker-title");ok(c.is(":visible"),"Title is visible");equal(c.text(),"Some Title")});test("i18n: Leverage i18n titleFormat when available.",patch_date(function(a){var b=$("<input />").appendTo("#qunit-fixture").val("2015年04月21日").datepicker({language:"zh-CN"}),d=b.data("datepicker"),c=d.picker;b.focus();equal(c.find(".datepicker-days thead .datepicker-switch").text(),"2015年04月","Title is in Chinese: 2015年04月")}));test("i18n: Leverage English (default) i18n titleFormat when translation key for specified language is not available.",patch_date(function(a){var b=$("<input />").appendTo("#qunit-fixture").val("04/21/2015").datepicker({language:"aa-BB"}),d=b.data("datepicker"),c=d.picker;b.focus();equal(c.find(".datepicker-days thead .datepicker-switch").text(),"April 2015","Title is in default format: April 2015")}));test("Z-index Offset: none",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker(),c=a.data("datepicker"),b=c.picker;a.parent().css("z-index",234);a.focus();equal(c.o.zIndexOffset,10,"Z-index offset option defaults to 10.");equal(b.css("z-index"),244,"Picker Z-index offset is respected.")});test("Z-index Offset: with value",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({zIndexOffset:1000}),c=a.data("datepicker"),b=c.picker;a.parent().css("z-index",234);a.focus();equal(c.o.zIndexOffset,1000,"Z-index offset option is accepted.");equal(b.css("z-index"),1234,"Picker Z-index offset is respected.")});test("templates",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({templates:{leftArrow:'<span class="glyphicon glyphicon-arrow-left"></span>',rightArrow:"</table>"}}),c=a.data("datepicker"),b=c.picker;a.focus();equal(b.find(".datepicker-days .prev").prop("innerHTML"),'<span class="glyphicon glyphicon-arrow-left"></span>');equal(b.find(".datepicker-days .next").prop("innerHTML"),$("<div>").html("&raquo;").text())});test("Nav arrow html templates with span tag",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",templates:{leftArrow:"<span></span>",rightArrow:"<span></span>"}}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-months tbody span:nth(9)");ok(c.hasClass("active"),"Month is selected")});test("Nav arrow html templates .prev click",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-10-26").datepicker({format:"yyyy-mm-dd",startView:1,templates:{leftArrow:"<i></i>"}}),d=a.data("datepicker"),b=d.picker,c;a.focus();b.find(".datepicker-months thead .prev i").trigger("click");c=b.find(".datepicker-months thead .datepicker-switch");equal(c.text(),"2011")});test("Visibility of the prev and next arrows for decade/century/millenium views with startDate and endDate",function(){var a=$("<input />").appendTo("#qunit-fixture").val("01/01/2015").datepicker({format:"dd/mm/yyyy",startView:2,startDate:"01/12/2014",endDate:"01/12/2016"}),d=a.data("datepicker"),b=d.picker,c;a.focus();c=b.find(".datepicker-years thead th.prev");ok(c.hasClass("disabled"),"Prev switcher is hidden");c=b.find(".datepicker-years thead th.next");ok(c.hasClass("disabled"),"Next switcher is hidden");b.find(".datepicker-years thead th.datepicker-switch").click();c=b.find(".datepicker-decades thead th.prev");ok(c.hasClass("disabled"),"Prev switcher is hidden");c=b.find(".datepicker-decades thead th.next");ok(c.hasClass("disabled"),"Next switcher is hidden");b.find(".datepicker-decades thead th.datepicker-switch").click();c=b.find(".datepicker-centuries thead th.prev");ok(c.hasClass("disabled"),"Prev switcher is hidden");c=b.find(".datepicker-centuries thead th.next");ok(c.hasClass("disabled"),"Next switcher is hidden")});test("date cells (outdated)",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker(),c=a.data("datepicker"),b=c.picker;a.focus();b.find(".datepicker-days .day").each(function(){ok(this.hasAttribute("data-date"))})});test("keepEmptyValues: none (default is false)",function(){var b=$("<div />").appendTo("#qunit-fixture"),c=$("<input />").val("2016-04-01").appendTo("#qunit-fixture"),a=$("<input />").appendTo("#qunit-fixture"),e=b.datepicker({format:"yyyy-mm-dd",inputs:[c,a]}),d=c.data("datepicker");c.focus();d.picker.find(".old.day").eq(0).click();equal(c.val(),"2016-03-27");equal(a.val(),"2016-03-27","Input_from value should be distributed.")});test("keepEmptyValues: true",function(){var b=$("<div />").appendTo("#qunit-fixture"),c=$("<input />").val("2016-04-01").appendTo("#qunit-fixture"),a=$("<input />").appendTo("#qunit-fixture"),e=b.datepicker({format:"yyyy-mm-dd",inputs:[c,a],keepEmptyValues:true}),d=c.data("datepicker");c.focus();d.picker.find(".old.day").eq(0).click();equal(c.val(),"2016-03-27");equal(a.val(),"","Input_from value should not be distributed.")});test("maxViewMode and navigation switch",function(){var a=$("<input />").appendTo("#qunit-fixture").datepicker({maxViewMode:0}),c=a.data("datepicker"),b=c.picker;a.focus();b.find(".datepicker-days thead th.datepicker-switch").click();ok(b.find(".datepicker-days").is(":visible"),"Days view visible")});test("updateViewDate",function(){expect(8);var c=$('<input value="08/03/1990"/>').appendTo("#qunit-fixture").datepicker({defaultViewDate:{year:1945,month:4,day:8},updateViewDate:false}).on("changeMonth",function(){var g=e?"changeMonth must be triggered":"changeMonth must not be triggered";ok(e,g)}).on("changeYear",function(){var g=a?"changeYear must be triggered":"changeYear must not be triggered";ok(a,g)}),f=c.data("datepicker"),d=f.picker,e=false,a=false,b=d.find(".datepicker-days thead th.datepicker-switch");equal(b.text(),"May 1945","uses defaultViewDate on initialization");c.datepicker("setDate",new Date(1945,8,2));equal(b.text(),"May 1945","does not change viewDate on `setDate` method");c.focus();d.find(".datepicker-days tbody tr td.day.new:first").click();equal(b.text(),"May 1945","does not change viewDate if a day in next month is selected");e=true;d.find(".datepicker-days thead th.next").click();equal(b.text(),"June 1945","changing month must still be possible");a=true;d.find(".datepicker-days thead th.datepicker-switch").click();d.find(".datepicker-months thead th.next").click();d.find(".datepicker-months tbody .month:first").click();equal(b.text(),"January 1946","changing year must still be possible")});test("Week Days: Week days default visibility (or enabled)",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd"}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".dow").length>0,"Week days added to view")});test("Week Days: Week days visibility when disabled",function(){var a=$("<input />").appendTo("#qunit-fixture").val("2012-03-05").datepicker({format:"yyyy-mm-dd",showWeekDays:false}),d=a.data("datepicker"),b=d.picker,c;a.focus();ok(b.find(".dow").length===0,"Week days not added to view")});