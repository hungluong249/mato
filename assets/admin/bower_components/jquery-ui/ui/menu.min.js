/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./widget","./position"],a)}else{a(jQuery)}}(function(a){return a.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item":function(b){b.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target);if(!this.mouseHandled&&c.not(".ui-state-disabled").length){this.select(b);if(!b.isPropagationStopped()){this.mouseHandled=true}if(c.has(".ui-menu").length){this.expand(b)}else{if(!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}}},"mouseenter .ui-menu-item":function(b){if(this.previousFilter){return}var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,b){var c=this.active||this.element.find(this.options.items).eq(0);if(!b){this.focus(d,c)}},blur:function(b){this._delay(function(){if(!a.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(b)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){if(this._closeOnDocumentClick(b)){this.collapseAll(b)}this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);if(b.data("ui-menu-submenu-carat")){b.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(f){var c,e,g,d,b=true;switch(f.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(f);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(f);break;case a.ui.keyCode.HOME:this._move("first","first",f);break;case a.ui.keyCode.END:this._move("last","last",f);break;case a.ui.keyCode.UP:this.previous(f);break;case a.ui.keyCode.DOWN:this.next(f);break;case a.ui.keyCode.LEFT:this.collapse(f);break;case a.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(f)}break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(f);break;case a.ui.keyCode.ESCAPE:this.collapse(f);break;default:b=false;e=this.previousFilter||"";g=String.fromCharCode(f.keyCode);d=false;clearTimeout(this.filterTimer);if(g===e){d=true}else{g=e+g}c=this._filterMenuItems(g);c=d&&c.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):c;if(!c.length){g=String.fromCharCode(f.keyCode);c=this._filterMenuItems(g)}if(c.length){this.focus(f,c);this.previousFilter=g;this.filterTimer=this._delay(function(){delete this.previousFilter},1000)}else{delete this.previousFilter}}if(b){f.preventDefault()}},_activate:function(b){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(b)}else{this.select(b)}}},refresh:function(){var f,c,e=this,d=this.options.icons.submenu,b=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var i=a(this),h=i.parent(),g=a("<span>").addClass("ui-menu-icon ui-icon "+d).data("ui-menu-submenu-carat",true);h.attr("aria-haspopup","true").prepend(g);i.attr("aria-labelledby",h.attr("id"))});f=b.add(this.element);c=f.find(this.options.items);c.not(".ui-menu-item").each(function(){var g=a(this);if(e._isDivider(g)){g.addClass("ui-widget-content ui-menu-divider")}});c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});c.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!a.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,c){if(b==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(c.submenu)}if(b==="disabled"){this.element.toggleClass("ui-state-disabled",!!c).attr("aria-disabled",c)}this._super(b,c)},focus:function(c,b){var e,d;this.blur(c,c&&c.type==="focus");this._scrollIntoView(b);this.active=b.first();d=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",d.attr("id"))}this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(c&&c.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}e=b.children(".ui-menu");if(e.length&&c&&(/^mouse/.test(c.type))){this._startOpening(e)}this.activeMenu=b.parent();this._trigger("focus",c,{item:b})},_scrollIntoView:function(e){var h,d,f,b,c,g;if(this._hasScroll()){h=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;f=e.offset().top-this.activeMenu.offset().top-h-d;b=this.activeMenu.scrollTop();c=this.activeMenu.height();g=e.outerHeight();if(f<0){this.activeMenu.scrollTop(b+f)}else{if(f+g>c){this.activeMenu.scrollTop(b+f-c+g)}}}},blur:function(c,b){if(!b){clearTimeout(this.timer)}if(!this.active){return}this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",c,{item:this.active})},_startOpening:function(b){clearTimeout(this.timer);if(b.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(b)},this.delay)},_open:function(c){var b=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(c.parents(".ui-menu")).hide().attr("aria-hidden","true");c.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(b)},collapseAll:function(c,b){clearTimeout(this.timer);this.timer=this._delay(function(){var d=b?this.element:a(c&&c.target).closest(this.element.find(".ui-menu"));if(!d.length){d=this.element}this._close(d);this.blur(c);this.activeMenu=d},this.delay)},_close:function(b){if(!b){b=this.active?this.active.parent():this.element}b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return !a(b.target).closest(".ui-menu").length},_isDivider:function(b){return !/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(c){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(b&&b.length){this._close();this.focus(c,b)}},expand:function(c){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(b&&b.length){this._open(b.parent());this._delay(function(){this.focus(c,b)})}},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,c,d){var b;if(this.active){if(e==="first"||e==="last"){b=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{b=this.active[e+"All"](".ui-menu-item").eq(0)}}if(!b||!b.length||!this.active){b=this.activeMenu.find(this.options.items)[c]()}this.focus(d,b)},nextPage:function(d){var c,e,b;if(!this.active){this.next(d);return}if(this.isLastItem()){return}if(this._hasScroll()){e=this.active.offset().top;b=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return c.offset().top-e-b<0});this.focus(d,c)}else{this.focus(d,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function(d){var c,e,b;if(!this.active){this.next(d);return}if(this.isFirstItem()){return}if(this._hasScroll()){e=this.active.offset().top;b=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return c.offset().top-e+b>0});this.focus(d,c)}else{this.focus(d,this.activeMenu.find(this.options.items).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(b,true)}this._trigger("select",b,c)},_filterMenuItems:function(d){var b=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),c=new RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return c.test(a.trim(a(this).text()))})}})}));