/*!
 * jQuery UI Selectmenu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./core","./widget","./position","./menu"],a)}else{a(jQuery)}}(function(a){return a.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable()}},_drawButton:function(){var b=this;this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(c){this.button.focus();c.preventDefault()}});this.element.hide();this.button=a("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);a("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=a("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!b.menuItems){b._refreshMenu()}});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(c,d){c.preventDefault();b._setSelection();b._select(d.item.data("ui-selectmenu-item"),c)},focus:function(d,e){var c=e.item.data("ui-selectmenu-item");if(b.focusIndex!=null&&c.index!==b.focusIndex){b._trigger("focus",d,{item:c});if(!b.isOpen){b._select(c,d)}}b.focusIndex=c.index;b.button.attr("aria-activedescendant",b.menuItems.eq(c.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton()}},_refreshMenu:function(){this.menu.empty();var c,b=this.element.find("option");if(!b.length){return}this._parseOptions(b);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");c=this._getSelectedItem();this.menuInstance.focus(null,c);this._setAria(c.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(b){if(this.options.disabled){return}if(!this.menuItems){this._refreshMenu()}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem())}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",b)},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(b){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",b)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(d,c){var e=this,b="";a.each(c,function(f,g){if(g.optgroup!==b){a("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(g.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:g.optgroup}).appendTo(d);b=g.optgroup}e._renderItemData(d,g)})},_renderItemData:function(b,c){return this._renderItem(b,c).data("ui-selectmenu-item",c)},_renderItem:function(c,d){var b=a("<li>");if(d.disabled){b.addClass("ui-state-disabled")}this._setText(b,d.label);return b.appendTo(c)},_setText:function(b,c){if(c){b.text(c)}else{b.html("&#160;")}},_move:function(f,e){var d,c,b=".ui-menu-item";if(this.isOpen){d=this.menuItems.eq(this.focusIndex)}else{d=this.menuItems.eq(this.element[0].selectedIndex);b+=":not(.ui-state-disabled)"}if(f==="first"||f==="last"){c=d[f==="first"?"prevAll":"nextAll"](b).eq(-1)}else{c=d[f+"All"](b).eq(0)}if(c.length){this.menuInstance.focus(e,c)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(b){this[this.isOpen?"close":"open"](b)},_setSelection:function(){var b;if(!this.range){return}if(window.getSelection){b=window.getSelection();b.removeAllRanges();b.addRange(this.range)}else{this.range.select()}this.button.focus()},_documentClick:{mousedown:function(b){if(!this.isOpen){return}if(!a(b.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(b)}}},_buttonEvents:{mousedown:function(){var b;if(window.getSelection){b=window.getSelection();if(b.rangeCount){this.range=b.getRangeAt(0)}}else{this.range=document.selection.createRange()}},click:function(b){this._setSelection();this._toggle(b)},keydown:function(c){var b=true;switch(c.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(c);b=false;break;case a.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(c)}break;case a.ui.keyCode.UP:if(c.altKey){this._toggle(c)}else{this._move("prev",c)}break;case a.ui.keyCode.DOWN:if(c.altKey){this._toggle(c)}else{this._move("next",c)}break;case a.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(c)}else{this._toggle(c)}break;case a.ui.keyCode.LEFT:this._move("prev",c);break;case a.ui.keyCode.RIGHT:this._move("next",c);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",c);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",c);break;default:this.menu.trigger(c);b=false}if(b){c.preventDefault()}}},_selectFocusedItem:function(c){var b=this.menuItems.eq(this.focusIndex);if(!b.hasClass("ui-state-disabled")){this._select(b.data("ui-selectmenu-item"),c)}},_select:function(c,b){var d=this.element[0].selectedIndex;this.element[0].selectedIndex=c.index;this._setText(this.buttonText,c.label);this._setAria(c);this._trigger("select",b,{item:c});if(c.index!==d){this._trigger("change",b,{item:c})}this.close(b)},_setAria:function(b){var c=this.menuItems.eq(b.index).attr("id");this.button.attr({"aria-labelledby":c,"aria-activedescendant":c});this.menu.attr("aria-activedescendant",c)},_setOption:function(b,c){if(b==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(c.button)}this._super(b,c);if(b==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(b==="disabled"){this.menuInstance.option("disabled",c);this.button.toggleClass("ui-state-disabled",c).attr("aria-disabled",c);this.element.prop("disabled",c);if(c){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}}if(b==="width"){this._resizeButton()}},_appendTo:function(){var b=this.options.appendTo;if(b){b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)}if(!b||!b[0]){b=this.element.closest(".ui-front")}if(!b.length){b=this.document[0].body}return b},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var b=this.options.width;if(!b){b=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(b)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(b){var c=[];b.each(function(e,g){var f=a(g),d=f.parent("optgroup");c.push({element:f,index:e,value:f.val(),label:f.text(),optgroup:d.attr("label")||"",disabled:d.prop("disabled")||f.prop("disabled")})});this.items=c},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}));