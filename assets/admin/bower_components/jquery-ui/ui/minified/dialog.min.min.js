/*! jQuery UI - v1.11.4 - 2015-03-13
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],a):a(jQuery)})(function(a){return a.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(c){var b=a(this).css(c).offset().top;0>b&&a(this).css("top",c.top-b)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var b,c=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),b=c.parent.children().eq(c.index),b.length&&b[0]!==this.element[0]?b.before(this.element):c.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(d){var b,c=this;if(this._isOpen&&this._trigger("beforeClose",d)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length){try{b=this.document[0].activeElement,b&&"body"!==b.nodeName.toLowerCase()&&a(b).blur()}catch(f){}}this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",d)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(d,b){var c=!1,g=this.uiDialog.siblings(".ui-front:visible").map(function(){return +a(this).css("z-index")}).get(),f=Math.max.apply(null,g);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),c=!0),c&&!b&&this._trigger("focus",d),c},open:function(){var b=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var b=this._focusedElement;b||(b=this.element.find("[autofocus]")),b.length||(b=this.element.find(":tabbable")),b.length||(b=this.uiDialogButtonPane.find(":tabbable")),b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable")),b.length||(b=this.uiDialog),b.eq(0).focus()},_keepFocus:function(c){function b(){var f=this.document[0].activeElement,d=this.uiDialog[0]===f||a.contains(this.uiDialog[0],f);d||this._focusTabbable()}c.preventDefault(),b.call(this),this._delay(b)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(d){if(this.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE){return d.preventDefault(),this.close(d),void 0}if(d.keyCode===a.ui.keyCode.TAB&&!d.isDefaultPrevented()){var b=this.uiDialog.find(":tabbable"),c=b.filter(":first"),f=b.filter(":last");d.target!==f[0]&&d.target!==this.uiDialog[0]||d.shiftKey?d.target!==c[0]&&d.target!==this.uiDialog[0]||!d.shiftKey||(this._delay(function(){f.focus()}),d.preventDefault()):(this._delay(function(){c.focus()}),d.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(c){a(c.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(c){c.preventDefault(),this.close(c)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(b){this.options.title||b.html("&#160;"),b.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var c=this,b=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(b)||a.isArray(b)&&!b.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(a.each(b,function(d,e){var g,f;e=a.isFunction(e)?{click:e,text:d}:e,e=a.extend({type:"button"},e),g=e.click,e.click=function(){g.apply(c.element[0],arguments)},f={icons:e.icons,text:e.showText},delete e.icons,delete e.showText,a("<button></button>",e).button(f).appendTo(c.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function d(e){return{position:e.position,offset:e.offset}}var b=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,f){a(this).addClass("ui-dialog-dragging"),b._blockFrames(),b._trigger("dragStart",e,d(f))},drag:function(e,f){b._trigger("drag",e,d(f))},stop:function(h,g){var e=g.offset.left-b.document.scrollLeft(),f=g.offset.top-b.document.scrollTop();c.position={my:"left top",at:"left"+(e>=0?"+":"")+e+" top"+(f>=0?"+":"")+f,of:b.window},a(this).removeClass("ui-dialog-dragging"),b._unblockFrames(),b._trigger("dragStop",h,d(g))}})},_makeResizable:function(){function f(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var c=this,d=this.options,h=d.resizable,g=this.uiDialog.css("position"),b="string"==typeof h?h:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:b,start:function(e,i){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",e,f(i))},resize:function(e,i){c._trigger("resize",e,f(i))},stop:function(l,k){var e=c.uiDialog.offset(),j=e.left-c.document.scrollLeft(),i=e.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(j>=0?"+":"")+j+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",l,f(k))}}).css("position",g)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var c=this._trackingInstances(),b=a.inArray(this,c);-1!==b&&c.splice(b,1)},_trackingInstances:function(){var b=this.document.data("ui-dialog-instances");return b||(b=[],this.document.data("ui-dialog-instances",b)),b},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");b||this.uiDialog.show(),this.uiDialog.position(this.options.position),b||this.uiDialog.hide()},_setOptions:function(d){var b=this,c=!1,f={};a.each(d,function(g,h){b._setOption(g,h),g in b.sizeRelatedOptions&&(c=!0),g in b.resizableRelatedOptions&&(f[g]=h)}),c&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(c,f){var b,d,g=this.uiDialog;"dialogClass"===c&&g.removeClass(this.options.dialogClass).addClass(f),"disabled"!==c&&(this._super(c,f),"appendTo"===c&&this.uiDialog.appendTo(this._appendTo()),"buttons"===c&&this._createButtons(),"closeText"===c&&this.uiDialogTitlebarClose.button({label:""+f}),"draggable"===c&&(b=g.is(":data(ui-draggable)"),b&&!f&&g.draggable("destroy"),!b&&f&&this._makeDraggable()),"position"===c&&this._position(),"resizable"===c&&(d=g.is(":data(ui-resizable)"),d&&!f&&g.resizable("destroy"),d&&"string"==typeof f&&g.resizable("option","handles",f),d||f===!1||this._makeResizable()),"title"===c&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var c,f,b,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),c=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),f=Math.max(0,d.minHeight-c),b="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-c):"none","auto"===d.height?this.element.css({minHeight:f,maxHeight:b,height:"auto"}):this.element.height(Math.max(0,d.height-c)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(c){b||this._allowInteraction(c)||(c.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var b=this.document.data("ui-dialog-overlays")-1;b?this.document.data("ui-dialog-overlays",b):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})});