/*! jQuery UI - v1.11.4 - 2015-03-13
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],a):a(jQuery)})(function(a){return a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(b,c){this._super(b,c),"handle"===b&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(c){var b=this.options;return this._blurActiveElement(c),this.helper||b.disabled||a(c.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(c),this.handle?(this._blockFrames(b.iframeFix===!0?"iframe":b.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var c=a(this);return a("<div>").css("position","absolute").appendTo(c.parent()).outerWidth(c.outerWidth()).outerHeight(c.outerHeight()).offset(c.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(d){var b=this.document[0];if(this.handleElement.is(d.target)){try{b.activeElement&&"body"!==b.activeElement.nodeName.toLowerCase()&&a(b.activeElement).blur()}catch(c){}}},_mouseStart:function(c){var b=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(c),this.originalPosition=this.position=this._generatePosition(c,!1),this.originalPageX=c.pageX,this.originalPageY=c.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._normalizeRightBottom(),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_refreshOffsets:function(b){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-this.offset.top}},_mouseDrag:function(d,b){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d,!0),this.positionAbs=this._convertPositionTo("absolute"),!b){var c=this._uiHash();if(this._trigger("drag",d,c)===!1){return this._mouseUp({}),!1}this.position=c.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var b=this,c=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,d)),this.dropped&&(c=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!c||"valid"===this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){b._trigger("stop",d)!==!1&&b._clear()}):this._trigger("stop",d)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(d){var b=this.options,c=a.isFunction(b.helper),f=c?a(b.helper.apply(this.element[0],[d])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;return f.parents("body").length||f.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo),c&&f[0]===this.element[0]&&this._setPositionRelative(),f[0]===this.element[0]||/(fixed|absolute)/.test(f.css("position"))||f.css("position","absolute"),f},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left" in b&&(this.offset.click.left=b.left+this.margins.left),"right" in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top" in b&&(this.offset.click.top=b.top+this.margins.top),"bottom" in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(b){return/(html|body)/i.test(b.tagName)||b===this.document[0]},_getParentOffset:function(){var c=this.offsetParent.offset(),b=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==b&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition){return{top:0,left:0}}var b=this.element.position(),c=this._isRootNode(this.scrollParent[0]);return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+(c?0:this.scrollParent.scrollTop()),left:b.left-(parseInt(this.helper.css("left"),10)||0)+(c?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,b,c,f=this.options,g=this.document[0];return this.relativeContainer=null,f.containment?"window"===f.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===f.containment?(this.containment=[0,0,a(g).width()-this.helperProportions.width-this.margins.left,(a(g).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):f.containment.constructor===Array?(this.containment=f.containment,void 0):("parent"===f.containment&&(f.containment=this.helper[0].parentNode),b=a(f.containment),c=b[0],c&&(d=/(scroll|auto)/.test(b.css("overflow")),this.containment=[(parseInt(b.css("borderLeftWidth"),10)||0)+(parseInt(b.css("paddingLeft"),10)||0),(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b.css("borderRightWidth"),10)||0)-(parseInt(b.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b.css("borderBottomWidth"),10)||0)-(parseInt(b.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=b),void 0):(this.containment=null,void 0)},_convertPositionTo:function(c,f){f||(f=this.position);var b="absolute"===c?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:f.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*b,left:f.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*b}},_generatePosition:function(p,k){var g,q,c,d,b=this.options,m=this._isRootNode(this.scrollParent[0]),f=p.pageX,j=p.pageY;return m&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),k&&(this.containment&&(this.relativeContainer?(q=this.relativeContainer.offset(),g=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]):g=this.containment,p.pageX-this.offset.click.left<g[0]&&(f=g[0]+this.offset.click.left),p.pageY-this.offset.click.top<g[1]&&(j=g[1]+this.offset.click.top),p.pageX-this.offset.click.left>g[2]&&(f=g[2]+this.offset.click.left),p.pageY-this.offset.click.top>g[3]&&(j=g[3]+this.offset.click.top)),b.grid&&(c=b.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY,j=g?c-this.offset.click.top>=g[1]||c-this.offset.click.top>g[3]?c:c-this.offset.click.top>=g[1]?c-b.grid[1]:c+b.grid[1]:c,d=b.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX,f=g?d-this.offset.click.left>=g[0]||d-this.offset.click.left>g[2]?d:d-this.offset.click.left>=g[0]?d-b.grid[0]:d+b.grid[0]:d),"y"===b.axis&&(f=this.originalPageX),"x"===b.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:m?0:this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:m?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(d,b,c){return c=c||this._uiHash(),a.ui.plugin.call(this,d,[b,c,this],!0),/^(drag|start|stop)/.test(d)&&(this.positionAbs=this._convertPositionTo("absolute"),c.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,d,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(d,b,c){var f=a.extend({},b,{item:c.element});c.sortables=[],a(c.options.connectToSortable).each(function(){var e=a(this).sortable("instance");e&&!e.options.disabled&&(c.sortables.push(e),e.refreshPositions(),e._trigger("activate",d,f))})},stop:function(d,b,c){var f=a.extend({},b,{item:c.element});c.cancelHelperRemoval=!1,a.each(c.sortables,function(){var e=this;e.isOver?(e.isOver=0,c.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(d),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",d,f))})},drag:function(d,b,c){a.each(c.sortables,function(){var e=!1,f=this;f.positionAbs=c.positionAbs,f.helperProportions=c.helperProportions,f.offset.click=c.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(c.sortables,function(){return this.positionAbs=c.positionAbs,this.helperProportions=c.helperProportions,this.offset.click=c.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,c._parent=b.helper.parent(),f.currentItem=b.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return b.helper[0]},d.target=f.currentItem[0],f._mouseCapture(d,!0),f._mouseStart(d,!0,!0),f.offset.click.top=c.offset.click.top,f.offset.click.left=c.offset.click.left,f.offset.parent.left-=c.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=c.offset.parent.top-f.offset.parent.top,c._trigger("toSortable",d),c.dropped=f.element,a.each(c.sortables,function(){this.refreshPositions()}),c.currentItem=c.element,f.fromOutside=c),f.currentItem&&(f._mouseDrag(d),b.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",d,f._uiHash(f)),f._mouseStop(d,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),b.helper.appendTo(c._parent),c._refreshOffsets(d),b.position=c._generatePosition(d,!0),c._trigger("fromSortable",d),c.dropped=!1,a.each(c.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(d,b,c){var f=a("body"),g=c.options;f.css("cursor")&&(g._cursor=f.css("cursor")),f.css("cursor",g.cursor)},stop:function(d,b,c){var f=c.options;f._cursor&&a("body").css("cursor",f._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(d,b,c){var f=a(b.helper),g=c.options;f.css("opacity")&&(g._opacity=f.css("opacity")),f.css("opacity",g.opacity)},stop:function(d,b,c){var f=c.options;f._opacity&&a(b.helper).css("opacity",f._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(c,d,b){b.scrollParentNotHidden||(b.scrollParentNotHidden=b.helper.scrollParent(!1)),b.scrollParentNotHidden[0]!==b.document[0]&&"HTML"!==b.scrollParentNotHidden[0].tagName&&(b.overflowOffset=b.scrollParentNotHidden.offset())},drag:function(g,c,d){var h=d.options,j=!1,f=d.scrollParentNotHidden[0],b=d.document[0];f!==b&&"HTML"!==f.tagName?(h.axis&&"x"===h.axis||(d.overflowOffset.top+f.offsetHeight-g.pageY<h.scrollSensitivity?f.scrollTop=j=f.scrollTop+h.scrollSpeed:g.pageY-d.overflowOffset.top<h.scrollSensitivity&&(f.scrollTop=j=f.scrollTop-h.scrollSpeed)),h.axis&&"y"===h.axis||(d.overflowOffset.left+f.offsetWidth-g.pageX<h.scrollSensitivity?f.scrollLeft=j=f.scrollLeft+h.scrollSpeed:g.pageX-d.overflowOffset.left<h.scrollSensitivity&&(f.scrollLeft=j=f.scrollLeft-h.scrollSpeed))):(h.axis&&"x"===h.axis||(g.pageY-a(b).scrollTop()<h.scrollSensitivity?j=a(b).scrollTop(a(b).scrollTop()-h.scrollSpeed):a(window).height()-(g.pageY-a(b).scrollTop())<h.scrollSensitivity&&(j=a(b).scrollTop(a(b).scrollTop()+h.scrollSpeed))),h.axis&&"y"===h.axis||(g.pageX-a(b).scrollLeft()<h.scrollSensitivity?j=a(b).scrollLeft(a(b).scrollLeft()-h.scrollSpeed):a(window).width()-(g.pageX-a(b).scrollLeft())<h.scrollSensitivity&&(j=a(b).scrollLeft(a(b).scrollLeft()+h.scrollSpeed)))),j!==!1&&a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,g)}}),a.ui.plugin.add("draggable","snap",{start:function(d,b,c){var f=c.options;c.snapElements=[],a(f.snap.constructor!==String?f.snap.items||":data(ui-draggable)":f.snap).each(function(){var h=a(this),g=h.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:h.outerWidth(),height:h.outerHeight(),top:g.top,left:g.left})})},drag:function(F,B,q){var x,y,t,J,A,C,H,w,k,E,G=q.options,D=G.snapTolerance,z=B.offset.left,j=z+q.helperProportions.width,K=B.offset.top,I=K+q.helperProportions.height;for(k=q.snapElements.length-1;k>=0;k--){A=q.snapElements[k].left-q.margins.left,C=A+q.snapElements[k].width,H=q.snapElements[k].top-q.margins.top,w=H+q.snapElements[k].height,A-D>j||z>C+D||H-D>I||K>w+D||!a.contains(q.snapElements[k].item.ownerDocument,q.snapElements[k].item)?(q.snapElements[k].snapping&&q.options.snap.release&&q.options.snap.release.call(q.element,F,a.extend(q._uiHash(),{snapItem:q.snapElements[k].item})),q.snapElements[k].snapping=!1):("inner"!==G.snapMode&&(x=D>=Math.abs(H-I),y=D>=Math.abs(w-K),t=D>=Math.abs(A-j),J=D>=Math.abs(C-z),x&&(B.position.top=q._convertPositionTo("relative",{top:H-q.helperProportions.height,left:0}).top),y&&(B.position.top=q._convertPositionTo("relative",{top:w,left:0}).top),t&&(B.position.left=q._convertPositionTo("relative",{top:0,left:A-q.helperProportions.width}).left),J&&(B.position.left=q._convertPositionTo("relative",{top:0,left:C}).left)),E=x||y||t||J,"outer"!==G.snapMode&&(x=D>=Math.abs(H-K),y=D>=Math.abs(w-I),t=D>=Math.abs(A-z),J=D>=Math.abs(C-j),x&&(B.position.top=q._convertPositionTo("relative",{top:H,left:0}).top),y&&(B.position.top=q._convertPositionTo("relative",{top:w-q.helperProportions.height,left:0}).top),t&&(B.position.left=q._convertPositionTo("relative",{top:0,left:A}).left),J&&(B.position.left=q._convertPositionTo("relative",{top:0,left:C-q.helperProportions.width}).left)),!q.snapElements[k].snapping&&(x||y||t||J||E)&&q.options.snap.snap&&q.options.snap.snap.call(q.element,F,a.extend(q._uiHash(),{snapItem:q.snapElements[k].item})),q.snapElements[k].snapping=x||y||t||J||E)}}}),a.ui.plugin.add("draggable","stack",{start:function(f,b,c){var g,h=c.options,d=a.makeArray(a(h.stack)).sort(function(k,j){return(parseInt(a(k).css("zIndex"),10)||0)-(parseInt(a(j).css("zIndex"),10)||0)});d.length&&(g=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(i){a(this).css("zIndex",g+i)}),this.css("zIndex",g+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(d,b,c){var f=a(b.helper),g=c.options;f.css("zIndex")&&(g._zIndex=f.css("zIndex")),f.css("zIndex",g.zIndex)},stop:function(d,b,c){var f=c.options;f._zIndex&&a(b.helper).css("zIndex",f._zIndex)}}),a.ui.draggable});